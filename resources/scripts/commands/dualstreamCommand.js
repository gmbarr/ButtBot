!function(){var e=$.inidb.exists("dualStreamCommand","otherChannels")?$.inidb.get("dualStreamCommand","otherChannels"):null,a=$.inidb.exists("dualStreamCommand","timerToggle")?$.inidb.get("dualStreamCommand","timerToggle"):!1,m=parseInt($.inidb.exists("dualStreamCommand","timerInterval"))?parseInt($.inidb.get("dualStreamCommand","timerInterval")):5,n=!1;$.bind("command",function(n){var t=n.getSender(),r=n.getCommand(),i=n.getArgs(),s=n.getArguments().trim(),d=s,l=i[0],o=i[1];if(r.equalsIgnoreCase("multi")){if(!l){if(null!=e)return void $.say($.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e);if($.isModv3(t,n.getTags()))return void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.usage"))}if(l.equalsIgnoreCase("set"))return $.isModv3(t,n.getTags())?o?(d=d.replace(l+" ","/"),d=d.replace(" ","/"),e=d,$.inidb.set("dualStreamCommand","otherChannels",e),$.say($.lang.get("dualstreamcommand.link.set",$.username.resolve($.channelName)+e)),void $.logEvent("dualstreamCommand.js",48,t+' set the multi link to "'+$.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e+'"')):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.set.usage")):void $.say($.whisperPrefix(t)+$.modMsg);if(l.equalsIgnoreCase("clear"))return $.isModv3(t,n.getTags())?(e=null,a=!1,$.inidb.del("dualStreamCommand","otherChannels"),$.inidb.set("dualStreamCommand","timerToggle",a),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.clear")),void $.logEvent("dualstreamCommand.js",64,t+" cleared the multi link")):void $.say($.whisperPrefix(t)+$.modMsg);if(l.equalsIgnoreCase("timer"))return $.isModv3(t,n.getTags())?o?o.equalsIgnoreCase("on")?(a=!0,$.inidb.set("dualStreamCommand","timerToggle",a),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.enabled")),void $.logEvent("dualstreamCommand.js",85,t+" enabled the multi timer")):o.equalsIgnoreCase("off")?(a=!1,$.inidb.set("dualStreamCommand","timerToggle",a),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.disabled")),void $.logEvent("dualstreamCommand.js",91,t+" disabled the multi timer")):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.usage")):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.usage")):void $.say($.whisperPrefix(t)+$.modMsg);if(l.equalsIgnoreCase("timerinterval"))return $.isModv3(t,n.getTags())?o?parseInt(o)<5?void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timerinterval.err")):(m=parseInt(o),$.inidb.set("dualStreamCommand","timerInterval",m),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timerinterval.set")),void $.logEvent("dualstreamCommand.js",116,t+" changed the multi timer interval to "+m+" seconds")):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timerinterval.usage")):void $.say($.whisperPrefix(t)+$.modMsg)}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./commands/dualstreamCommand.js")&&($.registerChatCommand("./commands/dualstreamCommand.js","multi",7),n||(n=!0,setInterval(function(){return null!=e&&a&&$.isOnline($.channelName)?($.say($.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e),void $.logEvent("dualstreamCommand.js",132,"Ran multi timer at "+$.systemTime())):void 0},60*m*1e3)))})}();
