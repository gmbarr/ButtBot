!function(){var e=$.inidb.exists("dualStreamCommand","otherChannels")?$.inidb.get("dualStreamCommand","otherChannels"):null,a=$.inidb.exists("dualStreamCommand","timerToggle")?$.inidb.get("dualStreamCommand","timerToggle"):!1,s=parseInt($.inidb.exists("dualStreamCommand","timerInterval"))?parseInt($.inidb.get("dualStreamCommand","timerInterval")):20,n=parseInt($.inidb.exists("dualStreamCommand","reqMessages"))?parseInt($.inidb.get("dualStreamCommand","reqMessages")):10,m=0;$.bind("ircChannelMessage",function(){m++}),$.bind("command",function(r){var t=r.getSender(),i=r.getCommand(),d=r.getArgs(),l=r.getArguments().trim(),o=l,g=d[0],u=d[1];if(i.equalsIgnoreCase("multi")){if(!g){if(null!=e)return void $.say($.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e);if($.isModv3(t,r.getTags()))return void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.usage"))}if(g.equalsIgnoreCase("set"))return $.isModv3(t,r.getTags())?u?(o=o.replace(g+" ","/"),o=o.replace(" ","/"),e=o,$.inidb.set("dualStreamCommand","otherChannels",e),$.say($.lang.get("dualstreamcommand.link.set",$.username.resolve($.channelName)+e)),void $.logEvent("dualstreamCommand.js",48,t+' set the multi link to "'+$.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e+'"')):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.set.usage")):void $.say($.whisperPrefix(t)+$.modMsg);if(g.equalsIgnoreCase("clear"))return $.isModv3(t,r.getTags())?(e=null,a=!1,$.inidb.del("dualStreamCommand","otherChannels"),$.inidb.set("dualStreamCommand","timerToggle",a),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.clear")),void $.logEvent("dualstreamCommand.js",64,t+" cleared the multi link")):void $.say($.whisperPrefix(t)+$.modMsg);if(g.equalsIgnoreCase("timer"))return $.isModv3(t,r.getTags())?u?u.equalsIgnoreCase("on")?(a=!0,$.inidb.set("dualStreamCommand","timerToggle",a),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.enabled")),void $.logEvent("dualstreamCommand.js",85,t+" enabled the multi timer")):u.equalsIgnoreCase("off")?(a=!1,$.inidb.set("dualStreamCommand","timerToggle",a),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.disabled")),void $.logEvent("dualstreamCommand.js",91,t+" disabled the multi timer")):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.usage")):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timer.usage")):void $.say($.whisperPrefix(t)+$.modMsg);if(g.equalsIgnoreCase("timerinterval"))return $.isModv3(t,r.getTags())?u?parseInt(u)<5?void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timerinterval.err")):(s=parseInt(u),$.inidb.set("dualStreamCommand","timerInterval",s),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timerinterval.set",s)),$.logEvent("dualstreamCommand.js",116,t+" changed the multi timer interval to "+s+" seconds"),void setInterval(function(){a&&null!=e&&$.isOnline($.channelName)&&m>=n&&($.say($.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e),m=0)},60*s*1e3,"dualStreamTimer")):void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.timerinterval.usage")):void $.say($.whisperPrefix(t)+$.modMsg);if(g.equalsIgnoreCase("reqmessage")){if(!$.isModv3(t,r.getTags()))return void $.say($.whisperPrefix(t)+$.modMsg);if(!u)return void $.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.req.usage"));n=parseInt(u),$.inidb.set("dualStreamCommand","reqMessages",n),$.say($.whisperPrefix(t)+$.lang.get("dualstreamcommand.reqmessages.set",n)),$.logEvent("dualstreamCommand.js",116,t+" changed the multi req messages to "+n+" messages")}}}),setInterval(function(){a&&null!=e&&$.isOnline($.channelName)&&m>=n&&($.say($.lang.get("dualstreamcommand.link")+$.username.resolve($.channelName)+e),m=0)},60*s*1e3,"dualStreamTimer"),$.bind("initReady",function(){$.bot.isModuleEnabled("./commands/dualstreamCommand.js")&&$.registerChatCommand("./commands/dualstreamCommand.js","multi",7)})}();
