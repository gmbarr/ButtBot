!function(){function e(e,t){e=e.toLowerCase(),t=t.toLowerCase(),$.inidb.exists("pricecom",t)&&parseInt($.inidb.get("pricecom",t))>0&&($.isMod(e)||($.inidb.incr("points",e,$.inidb.get("pricecom",t)),$.inidb.SaveAll()))}function t(e,t,s,n){var i;if(e+="",s)for(i in s){var a=RegExp("/"+s[i].replace(/([\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|])/g,"\\$&")+"/","ig");e=e.replace(a,n[i])}return e.replace("(sender)",$.resolveRank(t.getSender().toLowerCase())).replace("(baresender)",$.username.resolve(t.getSender().toLowerCase())).replace("(random)",$.username.resolve($.randElement($.users)[0])).replace("(pointname)",$.pointNameMultiple).replace("(uptime)",$.getStreamUptime($.channelName)).replace("(game)",$.getGame($.channelName)).replace("(status)",$.getStatus($.channelName)).replace("(follows)",$.getFollows($.channelName))}function s(e,t){return $.isAdmin(e)?!0:$.getCommandGroup(t)>=$.getUserGroupId(e)}function n(e){return parseInt($.inidb.exists("pricecom",e)?$.inidb.get("pricecom",e):0)}function i(){var e,t=$.inidb.GetKeyList("command","");for(e in t)$.commandExists(t[e])||$.registerChatCommand("./commands/customCommands.js",t[e],$.inidb.exists("permcom",t[e])?parseInt($.inidb.get("permcom",t[e])):7)}function a(){var e,t,s=$.inidb.GetKeyList("aliases","");for(t in s)$.commandExists(s[t])||(e=$.inidb.get("aliases",s[t]),$.registerChatCommand("./commands/customCommands.js",s[t],$.getCommandGroup(e)))}$.bind("command",function(e){var s=e.getSender().toLowerCase(),n=($.username.resolve(s,e.getTags()),e.getCommand()),i=e.getArgs(),r=e.getArguments(),o=i[0],g=i[1];if(n.equalsIgnoreCase("addcom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(!o||!g)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.add.usage"));o=i[0].replace("!",""),r=r.substring(r.indexOf(i[0])+i[0].length()+1),$.inidb.set("command",o,r),$.registerChatCommand("./commands/customCommands.js",o),$.logEvent("./commands/customCommands.js",28,s+" added command !"+o+' with the message "'+r+'"'),$.say($.whisperPrefix(s)+$.lang.get("customcommands.add.success",o))}if(n.equalsIgnoreCase("editcom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(o=i[0].replace("!",""),!o||!g)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.edit.usage"));if(!$.commandExists(o))return void $.say($.whisperPrefix(s)+$.lang.get("cmd.404",o));r=r.substring(r.indexOf(i[0])+i[0].length()+1),$.inidb.set("command",o,r),$.registerChatCommand("./commands/customCommands.js",o),$.logEvent("./commands/customCommands.js",28,s+" edited the command !"+o+' with the message "'+r+'"'),$.say($.whisperPrefix(s)+$.lang.get("customcommands.edit.success",o))}if(n.equalsIgnoreCase("delcom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(o=i[0].replace("!",""),!o)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.delete.usage"));if(!$.inidb.exists("command",o))return void $.say($.whisperPrefix(s)+$.lang.get("cmd.404",o));$.inidb.del("command",o),$.inidb.del("permcom",o),$.unregisterChatCommand("./commands/customCommands.js",o),$.logEvent("./commands/customCommands.js",28,s+" deleted the command !"+o),$.say($.whisperPrefix(s)+$.lang.get("customcommands.delete.success",o))}if(n.equalsIgnoreCase("aliascom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(!o||!g)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.usage"));if(!$.commandExists(o))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.error.target404"));if(o=i[0].replace("!",""),g=i[1].replace("!",""),$.inidb.exists("aliases",g))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.error"));$.inidb.set("aliases",g,o),$.registerChatCommand("./commands/customCommands.js",g),$.logEvent("customCommands.js",59,s+' added alias "!'+g+'" for "!'+o+'"'),$.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.success",o,g))}if(n.equalsIgnoreCase("delalias")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(!o||!g)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.delete.usage"));if(!$.inidb.exists("alias",o))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.delete.error.alias.404"));o=i[0].replace("!",""),$.unregisterChatCommand(o),$.inidb.del("aliases",o),$.logEvent("customCommands.js",56,s+" deleted alias !"+o),$.say($.whisperPrefix(s)+$.lang.get("customcommands.delete.success",o))}if(n.equalsIgnoreCase("permcom")){if(!$.isAdmin(s))return void $.say($.whisperPrefix(s)+$.adminMsg);if(!o||!g)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.set.perm.usage"));o=i[0].replace("!","");var u=i[1];isNaN(parseInt(u))&&(u=$.getGroupIdByName(u)),$.inidb.set("permcom",o,u),$.say($.whisperPrefix(s)+$.lang.get("customcommands.set.perm.success",o,$.getGroupNameById(u)))}if(n.equalsIgnoreCase("pricecom")){if(!$.isAdmin(s))return void $.say($.whisperPrefix(s)+$.adminMsg);if(!o||!g)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.set.price.usage"));if(!$.commandExists(o))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.set.price.error.404"));if(isNaN(parseInt(g))||parseInt(g)<0)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.set.price.error.invalid"));o=i[0].replace("!",""),$.inidb.set("pricecom",o,g),list=$.inidb.GetKeyList("aliases","");for(m in list)for(m in list)$.inidb.get("aliases",list[m]).equalsIgnoreCase(o)&&$.inidb.set("pricecom",list[m],g);$.say($.whisperPrefix(s)+$.lang.get("customcommands.set.price.success",o,g,$.pointNameMultiple))}if(n.equalsIgnoreCase("commands")){var m,l=$.inidb.GetKeyList("command",""),d="";for(m in l)d+="!",d+=l[m],d+=", ";if(0!=d.length)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.cmds",d))}$.inidb.exists("command",n.toLowerCase())&&(g=$.inidb.get("command",n.toLowerCase()),$.say(t(g,e))),a()}),$.bind("initReady",function(){$.bot.isModuleEnabled("./commands/customCommands.js")&&(i(),a(),$.registerChatCommand("./commands/customCommands.js","addcom",2),$.registerChatCommand("./commands/customCommands.js","pricecom",2),$.registerChatCommand("./commands/customCommands.js","aliascom",2),$.registerChatCommand("./commands/customCommands.js","delalias",2),$.registerChatCommand("./commands/customCommands.js","delcom",2),$.registerChatCommand("./commands/customCommands.js","editcom",2),$.registerChatCommand("./commands/customCommands.js","permcom",1),$.registerChatCommand("./commands/customCommands.js","commands",7))}),$.returnCommandCost=e,$.replaceCommandTags=t,$.permCom=s,$.getCommandPrice=n}();
