!function(){function e(e){var s=(Packages.com.gmt2001.HttpResponse,Packages.com.gmt2001.HttpRequest),a=Packages.java.util.HashMap,m=s.getData(s.RequestType.GET,e,"",new a);return m.content}function s(e,s){e=e.toLowerCase(),s=s.toLowerCase(),$.inidb.exists("pricecom",s)&&parseInt($.inidb.get("pricecom",s))>0&&($.isMod(e)||($.inidb.incr("points",e,$.inidb.get("pricecom",s)),$.inidb.SaveAll()))}function a(s,a,m,n,t){var o,E,y,P,R,O,S=Packages.org.json.JSONObject,M="",G="",I="",N="",s=s+"",T=a.getSender(),W=a.getArgs();if(-1!=s.indexOf("(touser)")&&(E=W[0]?W[0]:T),-1!=s.indexOf("(price)")&&(y=null==$.inidb.get("pricecom",m)?0:$.inidb.get("pricecom",m)),-1!=s.indexOf("(count)")&&$.inidb.incr("commandCount",m,1),P=s.match(r)){if(-1!=P[1].indexOf("$1"))for(var q=1;9>=q&&-1!=P[1].indexOf("$"+q);q++){if(!W[q-1])return $.lang.get("customcommands.customapi.404",m);P[1]=P[1].replace("$"+q,W[q-1])}I=e(P[1])}if(P=s.match(i)){if(-1!=P[1].indexOf("$1"))for(var q=1;9>=q&&-1!=P[1].indexOf("$"+q);q++){if(!W[q-1])return $.lang.get("customcommands.customapi.404",m);P[1]=P[1].replace("$"+q,W[q-1])}G=e(P[1]),R=P[2].split(" ");for(var A=0;A<R.length;A++)if(R[A].startsWith("{")&&R[A].endsWith("}"))I+=" "+R[A].match(d)[1];else if(R[A].startsWith("{")&&!R[A].endsWith("}")){for(N="";!R[A].endsWith("}");)N+=R[A++]+" ";N+=R[A],I+=" "+N.match(d)[1]}else if(O=R[A].split("."),1==O.length){try{M=new S(G).getString(O[0])}catch(L){if(-1==L.message.indexOf("not a string"))return $.lang.get("customcommands.customapijson.err",m);try{M=o.getInt(O[0])}catch(L){return $.lang.get("customcommands.customapijson.err",m)}}I+=" "+M}else{for(var q=0;q<O.length-1;q++)o=0==q?new S(G).getJSONObject(O[q]):o.getJSONObject(O[q]);try{M=o.getString(O[q])}catch(L){if(-1==L.message.indexOf("not a string"))return $.lang.get("customcommands.customapijson.err",m);try{M=o.getInt(O[q])}catch(L){return $.lang.get("customcommands.customapijson.err",m)}}I+=" "+M}}if(n)for(q in n){var k=new RegExp("/"+n[q].replace(/([\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|])/g,"\\$&")+"/","ig");s=s.replace(k,t[q])}return s.match(c)?s.replace(g,$.username.resolve(a.getSender())).replace(u,$.username.resolve(E)).replace(l,"@"+$.username.resolve(a.getSender())).replace(p,a.getSender()).replace(f,$.username.resolve($.randElement($.users)[0])).replace(C,$.pointNameMultiple).replace(h,$.getStreamUptime($.channelName)).replace(x,$.getGame($.channelName)).replace(w,$.getStatus($.channelName)).replace(v,$.getFollows($.channelName)).replace(b,$.inidb.get("commandCount",m)).replace(j,y).replace(r,I).replace(i,I):s}function m(e,s,a){return $.isAdmin(e)?0:""==a?$.getCommandGroup(s)>=$.getUserGroupId(e)?0:1:$.getSubcommandGroup(s,a)>=$.getUserGroupId(e)?0:2}function n(e){return parseInt($.inidb.exists("pricecom",e)?$.inidb.get("pricecom",e):0)}function t(){var e,s=$.inidb.GetKeyList("command","");for(e in s)$.commandExists(s[e])||$.registerChatCommand("./commands/customCommands.js",s[e],7)}function o(){var e,s,a=$.inidb.GetKeyList("aliases","");for(s in a)$.commandExists(a[s])||(e=$.inidb.get("aliases",a[s]),$.registerChatCommand("./commands/customCommands.js",a[s],$.getCommandGroup(e)))}var r=new RegExp(/\(customapi\s([\w\W:\/\$\=\?\&]+)\)/),i=new RegExp(/\(customapijson ([\w\.:\/\$=\?\&]+)\s([\w\W]+)\)/),d=new RegExp(/{([\w\W]+)}/),c=new RegExp(/\(customapi|\(sender\)|\(touser\)|\(@sender\)|\(baresender\)|\(random\)|\(pointname\)|\(uptime\)|\(game\)|\(status\)|\(follows\)|\(count\)|\(price\)/),g=new RegExp(/\(sender\)/),u=new RegExp(/\(touser\)/),l=new RegExp(/\(@sender\)/),p=new RegExp(/\(baresender\)/),f=new RegExp(/\(random\)/),C=new RegExp(/\(pointname\)/),h=new RegExp(/\(uptime\)/),x=new RegExp(/\(game\)/),w=new RegExp(/\(status\)/),v=new RegExp(/\(follows\)/),b=new RegExp(/\(count\)/),j=new RegExp(/\(price\)/);$.bind("command",function(e){var s=e.getSender().toLowerCase(),a=($.username.resolve(s,e.getTags()),e.getCommand()),m=e.getArgs(),n=e.getArguments(),t=m[0],o=m[1];if(a.equalsIgnoreCase("addcom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(!t||!o)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.add.usage"));t=m[0].replace("!",""),n=n.substring(n.indexOf(m[0])+m[0].length()+1),$.inidb.set("command",t,n),$.registerChatCommand("./commands/customCommands.js",t),$.logEvent("./commands/customCommands.js",28,s+" added command !"+t+' with the message "'+n+'"'),$.say($.whisperPrefix(s)+$.lang.get("customcommands.add.success",t))}if(a.equalsIgnoreCase("editcom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(t=m[0].replace("!",""),!t||!o)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.edit.usage"));if(!$.commandExists(t))return void $.say($.whisperPrefix(s)+$.lang.get("cmd.404",t));n=n.substring(n.indexOf(m[0])+m[0].length()+1),$.inidb.set("command",t,n),$.registerChatCommand("./commands/customCommands.js",t),$.logEvent("./commands/customCommands.js",28,s+" edited the command !"+t+' with the message "'+n+'"'),$.say($.whisperPrefix(s)+$.lang.get("customcommands.edit.success",t))}if(a.equalsIgnoreCase("delcom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(!m[0])return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.delete.usage"));if(t=m[0].replace("!",""),!t)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.delete.usage"));if(!$.inidb.exists("command",t))return void $.say($.whisperPrefix(s)+$.lang.get("cmd.404",t));$.inidb.del("command",t),$.inidb.del("permcom",t),$.unregisterChatCommand("./commands/customCommands.js",t),$.logEvent("./commands/customCommands.js",28,s+" deleted the command !"+t),$.say($.whisperPrefix(s)+$.lang.get("customcommands.delete.success",t))}if(a.equalsIgnoreCase("aliascom")){if(!$.isModv3(s,e.getTags()))return void $.say($.whisperPrefix(s)+$.modMsg);if(!t||!o)return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.usage"));if(t=m[0].replace("!",""),o=m[1].replace("!",""),!$.commandExists(t))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.error.target404"));if($.inidb.exists("aliases",o))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.error",o));if($.commandExists(o))return void $.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.usage"));$.inidb.set("aliases",o,t),$.registerChatCommand("./commands/customCommands.js",o),$.logEvent("customCommands.js",59,s+' added alias "!'+o+'" for "!'+t+'"'),$.say($.whisperPrefix(s)+$.lang.get("customcommands.alias.success",t,o))}return $.getSubcommandGroup(a,r)>=$.getUserGroupId(user);var r}),$.bind("initReady",function(){$.bot.isModuleEnabled("./commands/customCommands.js")&&(t(),o(),$.registerChatCommand("./commands/customCommands.js","addcom",2),$.registerChatCommand("./commands/customCommands.js","pricecom",2),$.registerChatCommand("./commands/customCommands.js","aliascom",2),$.registerChatCommand("./commands/customCommands.js","delalias",2),$.registerChatCommand("./commands/customCommands.js","delcom",2),$.registerChatCommand("./commands/customCommands.js","editcom",2),$.registerChatCommand("./commands/customCommands.js","permcom",1),$.registerChatCommand("./commands/customCommands.js","listtags",2),$.registerChatCommand("./commands/customCommands.js","commands",7))}),$.returnCommandCost=s,$.replaceCommandTags=a,$.permCom=m,$.getCommandPrice=n}();
