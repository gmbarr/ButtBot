(function(){function e(e,s){e=e.toLowerCase();s=s.toLowerCase();if($.inidb.exists("pricecom",s)&&parseInt($.inidb.get("pricecom",s))>0){if(!$.isMod(e)){$.inidb.incr("points",e,$.inidb.get("pricecom",s));$.inidb.SaveAll()}}}function s(e,s,a,i){var r;e=e+"";if(a){for(r in a){var m=new RegExp("/"+a[r].replace(/([\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|])/g,"\\$&")+"/","ig");e=e.replace(m,i[r])}}return e.replace(/\([.]{3}\)/g,s.getArgs().length==1?$.username.resolve(s.getArgs()[0]):s.getArguments()).replace(/\(sender\)/g,$.resolveRank(s.getSender().toLowerCase())).replace(/\(baresender\)/g,$.username.resolve(s.getSender().toLowerCase())).replace(/\(random\)/g,$.username.resolve($.randElement($.users)[0])).replace(/\(pointsname\)/g,$.pointNameMultiple)}function a(e,s){if($.isAdmin(e)){return true}return $.getCommandGroup(s)>=$.getUserGroupId(e)}function i(e){return parseInt($.inidb.exists("pricecom",e)?$.inidb.get("pricecom",e):0)}function r(){var e=$.inidb.GetKeyList("command",""),s;for(s in e){if(!$.commandExists(e[s])){$.registerChatCommand("./commands/customCommands.js",e[s],$.inidb.exists("permcom",e[s])?parseInt($.inidb.get("permcom",e[s])):7)}}}function m(){var e=$.inidb.GetKeyList("aliases",""),s,a;for(a in e){if(!$.commandExists(e[a])){s=$.inidb.get("aliases",e[a]);$.registerChatCommand("./commands/customCommands.js",e[a],$.getCommandGroup(s))}}}$.bind("command",function(e){var a=e.getSender().toLowerCase(),i=$.username.resolve(a,e.getTags()),r=e.getCommand(),n=e.getArgs(),t=e.getArguments(),o,d,c,g;if(r.equalsIgnoreCase("addcom")){if(!$.isModv3(a,e.getTags())){$.say($.whisperPrefix(a)+$.modMsg);return}o=(n[0]+"").replace(/^!/,"").toLowerCase();d=t.substr(o.length).trim();if($.commandExists(o)||o.length==0||d.length==0){$.say($.whisperPrefix(a)+$.lang.get("customcommands.add.error",i));return}$.registerChatCommand("./commands/customCommands.js",o);$.inidb.set("command",o,d);$.logEvent("customCommands.js",50,i+' created command "!'+o+'" with message "'+d+'"');$.say($.whisperPrefix(a)+$.lang.get("customcommands.add.success",i,o))}if(r.equalsIgnoreCase("delcom")){if(!$.isModv3(a,e.getTags())){$.say($.whisperPrefix(a)+$.modMsg);return}o=(n[0]+"").replace(/^!/,"").toLowerCase();c=$.inidb.GetKeyList("aliases","");if(o.length==0){$.say($.whisperPrefix(a)+$.lang.get("customcommands.delete.usage"));return}if(!$.commandExists(o)){$.say($.whisperPrefix(a)+$.lang.get("cmd.404",o));return}for(g in c){if($.inidb.get("aliases",c[g]).equalsIgnoreCase(o)){$.unregisterChatCommand(c[g]);$.inidb.del("aliases",c[g])}}$.unregisterChatCommand(o);$.inidb.del("command",o);$.inidb.del("permcom",o);$.say($.whisperPrefix(a)+$.lang.get("customcommands.delete.success",i,o))}if(r.equalsIgnoreCase("aliascom")){if(!$.isModv3(a,e.getTags())){$.say($.whisperPrefix(a)+$.modMsg);return}if(!n[0]||!n[1]){$.say($.whisperPrefix(a)+$.lang.get("customcommands.alias.usage"));return}o=n[0].replace("!","").toLowerCase();d=n[1].replace("!","").toLowerCase();if(!$.commandExists(o)){$.say($.whisperPrefix(a)+$.lang.get("customcommands.alias.error.target404",i));return}if($.inidb.exists("aliases",d)){$.say($.whisperPrefix(a)+$.lang.get("customcommands.alias.error",i));return}$.inidb.set("aliases",d,o);$.registerChatCommand("./commands/customCommands.js",d);$.logEvent("customCommands.js",59,i+' added alias "!'+d+'" for "!'+o+'"');$.say($.whisperPrefix(a)+$.lang.get("customcommands.alias.success",i,o,d))}if(r.equalsIgnoreCase("commands")){var u=$.inidb.GetKeyList("command",""),l="",g;for(g in u){l+="!";l+=u[g];l+=", "}if(l.length!=0){$.say($.whisperPrefix(a)+$.lang.get("customcommands.cmds",l));return}}if(r.equalsIgnoreCase("delalias")){if(!$.isModv3(a,e.getTags())){$.say($.whisperPrefix(a)+$.modMsg);return}o=(n[0]+"").replace(/^!(.*)/,"$1").toLowerCase();if(!o){$.say($.whisperPrefix(a)+$.lang.get("customcommands.alias.delete.usage"));return}if(!$.inidb.exists("alias",o)){$.say($.whisperPrefix(a)+$.lang.get("customcommands.alias.delete.error.alias.404",i));return}$.unregisterChatCommand(o);$.inidb.del("aliases",o);$.logEvent("customCommands.js",56,i+" deleted alias !"+o);$.say($.whisperPrefix(a)+$.lang.get("customcommands.delete.success",i,o))}if(r.equalsIgnoreCase("permcom")){var p;if(!$.isAdmin(a)){$.say($.whisperPrefix(a)+$.adminMsg);return}o=(n[0]+"").replace(/^!(.*)/,"$1").toLowerCase();p=n[1]+"";if(!o||!p){$.say($.whisperPrefix(a)+$.lang.get("customcommands.set.perm.usage"));return}if(isNaN(parseInt(p))){p=$.getGroupIdByName(p)}$.inidb.set("permcom",o,p);$.say($.whisperPrefix(a)+$.lang.get("customcommands.set.perm.success",o,$.getGroupNameById(p)))}if(r.equalsIgnoreCase("pricecom")){if(!$.isAdmin(a)){$.say($.whisperPrefix(a)+$.adminMsg);return}o=(n[0]+"").replace(/^!(.*)/,"$1").toLowerCase();d=n[1];if(!o||!d){$.say($.whisperPrefix(a)+$.lang.get("customcommands.set.price.usage"));return}if(!$.commandExists(o)){$.say($.whisperPrefix(a)+$.lang.get("customcommands.set.price.error.404"));return}if(isNaN(parseInt(d))||parseInt(d)<0){$.say($.whisperPrefix(a)+$.lang.get("customcommands.set.price.error.invalid"));return}$.inidb.set("pricecom",o,d);c=$.inidb.GetKeyList("aliases","");for(g in c){for(g in c){if($.inidb.get("aliases",c[g]).equalsIgnoreCase(o)){$.inidb.set("pricecom",c[g],d)}}}$.say($.whisperPrefix(a)+$.lang.get("customcommands.set.price.success",o,d,$.pointNameMultiple))}if($.inidb.exists("command",r.toLowerCase())){d=$.inidb.get("command",r.toLowerCase());$.say(s(d,e))}m()});$.bind("initReady",function(){if($.bot.isModuleEnabled("./commands/customCommands.js")){r();m();$.registerChatCommand("./commands/customCommands.js","addcom",2);$.registerChatCommand("./commands/customCommands.js","pricecom",2);$.registerChatCommand("./commands/customCommands.js","aliascom",2);$.registerChatCommand("./commands/customCommands.js","delalias",2);$.registerChatCommand("./commands/customCommands.js","delcom",2);$.registerChatCommand("./commands/customCommands.js","permcom",1);$.registerChatCommand("./commands/customCommands.js","commands",7)}});$.returnCommandCost=e;$.replaceCommandTags=s;$.permCom=a;$.getCommandPrice=i})();
