!function(){function e(){M=$.getIniDbBoolean("chatModerator","linksToggle"),y=$.getIniDbString("chatModerator","linksMessage"),I=$.getIniDbNumber("chatModerator","linkPermitTime"),w=$.getIniDbBoolean("chatModerator","capsToggle"),C=$.getIniDbString("chatModerator","capsMessage"),P=$.getIniDbFloat("chatModerator","capsLimitPercent"),x=$.getIniDbNumber("chatModerator","capsTriggerLength"),S=$.getIniDbBoolean("chatModerator","spamToggle"),v=$.getIniDbString("chatModerator","spamMessage"),L=$.getIniDbNumber("chatModerator","spamLimit"),q=$.getIniDbBoolean("chatModerator","symbolsToggle"),D=$.getIniDbString("chatModerator","symbolsMessage"),k=$.getIniDbFloat("chatModerator","symbolsLimitPercent"),T=$.getIniDbFloat("chatModerator","symbolsGroupLimit"),B=$.getIniDbNumber("chatModerator","symbolsTriggerLength"),E=$.getIniDbBoolean("chatModerator","emotesToggle"),N=$.getIniDbString("chatModerator","emotesMessage"),F=$.getIniDbNumber("chatModerator","emotesLimit"),_=$.getIniDbBoolean("chatModerator","longMessageToggle"),j=$.getIniDbBoolean("chatModerator","longMessageMessage"),R=$.getIniDbNumber("chatModerator","longMessageLimit"),A=$.getIniDbBoolean("chatModerator","colorsToggle"),G=$.getIniDbString("chatModerator","colorsMessage"),O={Links:$.getIniDbBoolean("chatModerator","subscribersModerateLinks"),Caps:$.getIniDbBoolean("chatModerator","subscribersModerateCaps"),Symbols:$.getIniDbBoolean("chatModerator","subscribersModerateSymbols"),Spam:$.getIniDbBoolean("chatModerator","subscribersModerateSpam"),Emotes:$.getIniDbBoolean("chatModerator","subscribersModerateEmotes"),Colors:$.getIniDbBoolean("chatModerator","subscribersModerateColors"),LongMsg:$.getIniDbBoolean("chatModerator","subscribersModerateLongMsg")},U={Links:$.getIniDbBoolean("chatModerator","regularsModerateLinks"),Caps:$.getIniDbBoolean("chatModerator","regularsModerateCaps"),Symbols:$.getIniDbBoolean("chatModerator","regularsModerateSymbols"),Spam:$.getIniDbBoolean("chatModerator","regularsModerateSpam"),Emotes:$.getIniDbBoolean("chatModerator","regularsModerateEmotes"),Colors:$.getIniDbBoolean("chatModerator","regularsModerateColors"),LongMsg:$.getIniDbBoolean("chatModerator","regularsModerateLongMsg")},K={Links:$.getIniDbBoolean("chatModerator","silentTimeoutLinks"),Caps:$.getIniDbBoolean("chatModerator","silentTimeoutCaps"),Symbols:$.getIniDbBoolean("chatModerator","silentTimeoutSymbols"),Spam:$.getIniDbBoolean("chatModerator","silentTimeoutSpam"),Emotes:$.getIniDbBoolean("chatModerator","silentTimeoutEmotes"),Colors:$.getIniDbBoolean("chatModerator","silentTimeoutColors"),LongMsg:$.getIniDbBoolean("chatModerator","silentTimeoutLongMsg")},H=$.getIniDbString("chatModerator","blacklistMessage"),W=$.getIniDbNumber("chatModerator","warningTime",5),z=$.getIniDbNumber("chatModerator","timeoutTime",600),r(),a()}function r(){var e=$.inidb.GetKeyList("blackList","");for(c in e)p.push($.inidb.get("blackList",e[c]))}function a(){var e=$.inidb.GetKeyList("whiteList","");for(c in e)f.push($.inidb.get("whiteList",e[c]))}function t(e,r){$.say(".timeout "+e+" "+r),setTimeout(function(){$.say(".timeout "+e+" "+r)},1e3)}function s(e){for(c in b)if(b[c].user.equalsIgnoreCase(e)){var r=b[c].time-$.systemTime();return void(r>0?(t(e,z),b.splice(c,1),b.push({user:e,time:V}),o(e,z),Q=$.lang.get("chatmoderator.timeout")):(t(e,W),b.splice(c,1),b.push({user:e,time:V}),o(e,W),Q=$.lang.get("chatmoderator.warning")))}t(e,W),b.push({user:e,time:V}),o(e,W),Q=$.lang.get("chatmoderator.warning")}function o(e,r){$.logChatModEvent("chatModerator.js",e+" was timed out for "+r+" seconds."),$.bot.isModuleEnabled("./handlers/panelHandler.js")&&$.panelDB.updateModLinesDB()}function i(e,r){Y=X-$.systemTime(),0>=Y&&$.say("@"+$.username.resolve(e)+", "+r+" "+Q),X=1e3*J+$.systemTime()}function g(e){h.push(e);var r=setTimeout(function(){for(c in h)if(h[c].equalsIgnoreCase(e)){h.splice(c,1);break}clearTimeout(r)},1e3*I)}function n(e){return e?$.lang.get("common.enabled"):$.lang.get("common.disabled")}function l(e){return e?"not allowed":"allowed"}function d(e){var r=e.getSender(),a=e.getMessage().toLowerCase();for(c in p)if(a.contains(p[c].toLowerCase()))return timeoutUser(r,z),Q=$.lang.get("chatmoderator.timeout"),i(r,H),!0;return!1}function m(e){var r=e.getSender();e.getMessage().toLowerCase();for(c in h)if(h[c].equalsIgnoreCase(r)&&$.patternDetector.hasLinks(e))return h.splice(c,1),!0;return!1}function u(e){var r=(e.getSender(),e.getMessage().toLowerCase());for(c in f)if(r.contains(f[c]))return!0;return!1}var c,h=[],b=[],f=[],p=[],M=$.getSetIniDbBoolean("chatModerator","linksToggle",!0),y=$.getSetIniDbString("chatModerator","linksMessage","you were timed out for linking"),I=$.getSetIniDbNumber("chatModerator","linkPermitTime",120),w=$.getSetIniDbBoolean("chatModerator","capsToggle",!0),C=$.getSetIniDbString("chatModerator","capsMessage","you were timed out for overusing caps"),P=$.getSetIniDbFloat("chatModerator","capsLimitPercent",50),x=$.getSetIniDbNumber("chatModerator","capsTriggerLength",15),S=$.getSetIniDbBoolean("chatModerator","spamToggle",!0),v=$.getSetIniDbString("chatModerator","spamMessage","you were timed out for spamming repeating characters"),L=$.getSetIniDbNumber("chatModerator","spamLimit",15),q=$.getSetIniDbBoolean("chatModerator","symbolsToggle",!0),D=$.getSetIniDbString("chatModerator","symbolsMessage","you were timed out for overusing symbols"),k=$.getSetIniDbFloat("chatModerator","symbolsLimitPercent",50),T=$.getSetIniDbFloat("chatModerator","symbolsGroupLimit",10),B=$.getSetIniDbNumber("chatModerator","symbolsTriggerLength",15),E=$.getSetIniDbBoolean("chatModerator","emotesToggle",!1),N=$.getSetIniDbString("chatModerator","emotesMessage","you were timed out for overusing emotes"),F=$.getSetIniDbNumber("chatModerator","emotesLimit",25),_=$.getSetIniDbBoolean("chatModerator","longMessageToggle",!0),j=$.getSetIniDbBoolean("chatModerator","longMessageMessage","you were timed out for posting a long message"),R=$.getSetIniDbNumber("chatModerator","longMessageLimit",300),A=$.getSetIniDbBoolean("chatModerator","colorsToggle",!1),G=$.getSetIniDbString("chatModerator","colorsMessage","you were timed out for using /me."),O={Links:$.getSetIniDbBoolean("chatModerator","subscribersModerateLinks",!1),Caps:$.getSetIniDbBoolean("chatModerator","subscribersModerateCaps",!1),Symbols:$.getSetIniDbBoolean("chatModerator","subscribersModerateSymbols",!1),Spam:$.getSetIniDbBoolean("chatModerator","subscribersModerateSpam",!1),Emotes:$.getSetIniDbBoolean("chatModerator","subscribersModerateEmotes",!1),Colors:$.getSetIniDbBoolean("chatModerator","subscribersModerateColors",!1),LongMsg:$.getSetIniDbBoolean("chatModerator","subscribersModerateLongMsg",!1)},U={Links:$.getSetIniDbBoolean("chatModerator","regularsModerateLinks",!0),Caps:$.getSetIniDbBoolean("chatModerator","regularsModerateCaps",!0),Symbols:$.getSetIniDbBoolean("chatModerator","regularsModerateSymbols",!0),Spam:$.getSetIniDbBoolean("chatModerator","regularsModerateSpam",!0),Emotes:$.getSetIniDbBoolean("chatModerator","regularsModerateEmotes",!0),Colors:$.getSetIniDbBoolean("chatModerator","regularsModerateColors",!0),LongMsg:$.getSetIniDbBoolean("chatModerator","regularsModerateLongMsg",!0)},K={Links:$.getSetIniDbBoolean("chatModerator","silentTimeoutLinks",!1),Caps:$.getSetIniDbBoolean("chatModerator","silentTimeoutCaps",!1),Symbols:$.getSetIniDbBoolean("chatModerator","silentTimeoutSymbols",!1),Spam:$.getSetIniDbBoolean("chatModerator","silentTimeoutSpam",!1),Emotes:$.getSetIniDbBoolean("chatModerator","silentTimeoutEmotes",!1),Colors:$.getSetIniDbBoolean("chatModerator","silentTimeoutColors",!1),LongMsg:$.getSetIniDbBoolean("chatModerator","silentTimeoutLongMsg",!1)},H=$.getSetIniDbString("chatModerator","blacklistMessage","you were timed out using a blacklisted phrase"),W=$.getSetIniDbNumber("chatModerator","warningTime",5),z=$.getSetIniDbNumber("chatModerator","timeoutTime",600),J=$.getSetIniDbNumber("chatModerator","msgCooldownSec",20),Q="",V=36e5+$.systemTime(),X=0,Y=0;$.bind("ircChannelMessage",function(e){var r=e.getSender(),a=e.getMessage(),t=a.length();if(!$.isModv3(r,e.getTags())){if(a&&d(e))return;if(M&&$.patternDetector.hasLinks(e)){if($.youtubePlayerConnected&&a.contains("youtube.com")||a.contains("youtu.be"))return;if(a&&m(e)||u(e))return;if(!U.Links&&$.isReg(r)||!O.Links&&$.isSubv3(r,e.getTags()))return;return s(r),void(K.Links||i(r,y))}if(w&&t>x){if(!U.Caps&&$.isReg(r)||!O.Caps&&$.isSubv3(r,e.getTags()))return;if(parseFloat($.patternDetector.getNumberOfCaps(e))/t*100>P)return s(r),void(K.Caps||i(r,C))}if(q&&t>B){if(!U.Symbols&&$.isReg(r)||!O.Symbols&&$.isSubv3(r,e.getTags()))return;if($.patternDetector.getLongestNonLetterSequence(e)>T)return s(r),void(K.Symbols||i(r,D));if(parseFloat($.patternDetector.getNumberOfNonLetters(e))/t*100>k)return s(r),void(K.Symbols||i(r,D))}if(S&&$.patternDetector.getLongestRepeatedSequence(e)>L){if(!U.Spam&&$.isReg(r)||!O.Spam&&$.isSubv3(r,e.getTags()))return;return s(r),void(K.Spam||i(r,v))}if(E&&$.patternDetector.getNumberOfEmotes(e)>F){if(!U.Emotes&&$.isReg(r)||!O.Emotes&&$.isSubv3(r,e.getTags()))return;return s(r),void(K.Emotes||i(r,N))}if(A&&a.startsWith("/me")){if(!U.Colors&&$.isReg(r)||!O.Colors&&$.isSubv3(r,e.getTags()))return;return s(r),void(K.Colors||i(r,G))}if(_&&t>R){if(!U.LongMsg&&$.isReg(r)||!O.LongMsg&&$.isSubv3(r,e.getTags()))return;s(r),K.LongMsg||i(r,j)}}}),$.bind("command",function(t){var s=t.getSender(),o=t.getCommand(),i=t.getArguments(),d=t.getArgs(),m=d[0],u=d[1];if(o.equalsIgnoreCase("permit"))return $.isModv3(s,t.getTags())?m?(g(m),void $.say($.username.resolve(m)+$.lang.get("chatmoderator.permited",I))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.permit.usage")):void $.say($.whisperPrefix(s)+$.modMsg);if(o.equalsIgnoreCase("blacklist")){if(!$.isAdmin(s))return void $.say($.whisperPrefix(s)+$.adminMsg);if(!m)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.usage"));if(m.equalsIgnoreCase("add")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.add.usage"));var c=i.replace(m,"").trim().toLowerCase();$.inidb.set("blackList","phrase_"+p.length,c),p.push(c),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.added"))}if(m.equalsIgnoreCase("remove")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.remove.usage"));if(!$.inidb.exists("blackList","phrase_"+parseInt(u)))return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.err"));$.inidb.del("blackList","phrase_"+parseInt(u)),r(),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.removed"))}if(m.equalsIgnoreCase("show")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.show.usage"));if(!$.inidb.exists("blackList","phrase_"+parseInt(u)))return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.err"));$.say($.whisperPrefix(s)+$.inidb.get("blackList","phrase_"+parseInt(u)))}}if(o.equalsIgnoreCase("whiteList")){if(!$.isAdmin(s))return void $.say($.whisperPrefix(s)+$.adminMsg);if(!m)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.whitelist.usage"));if(m.equalsIgnoreCase("add")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.whitelist.add.usage"));var h=i.replace(m,"").trim().toLowerCase();$.inidb.set("whiteList","link_"+f.length,h),f.push(h),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.whitelist.link.added"))}if(m.equalsIgnoreCase("remove")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.whitelist.remove.usage"));if(!$.inidb.exists("whiteList","link_"+parseInt(u)))return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.err"));$.inidb.del("whiteList","link_"+parseInt(u)),a(),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.whitelist.removed"))}if(m.equalsIgnoreCase("show")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.whitelist.show.usage"));if(!$.inidb.exists("whiteList","link_"+parseInt(u)))return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.err"));$.say($.whisperPrefix(s)+$.inidb.get("whiteList","link_"+parseInt(u)))}}if(o.equalsIgnoreCase("moderation")||o.equalsIgnoreCase("mod")){if(!$.isAdmin(s))return void $.say($.whisperPrefix(s)+$.adminMsg);if(!m)return $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.usage.toggles")),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.usage.messages")),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.options"));if(m.equalsIgnoreCase("links")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.link.usage",n(M)));if(u.equalsIgnoreCase("on"))return M=!0,$.inidb.set("chatModerator","linksToggle",M),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.link.filter.enabled"));if(u.equalsIgnoreCase("off"))return M=!1,$.inidb.set("chatModerator","linksToggle",M),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.link.filter.disabled"))}if(m.equalsIgnoreCase("caps")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.usage",n(w)));if(u.equalsIgnoreCase("on"))return w=!0,$.inidb.set("chatModerator","capsToggle",w),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.filter.enabled"));if(u.equalsIgnoreCase("off"))return w=!1,$.inidb.set("chatModerator","capsToggle",w),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.filter.disabled"))}if(m.equalsIgnoreCase("spam")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.usage",n(S)));if(u.equalsIgnoreCase("on"))return S=!0,$.inidb.set("chatModerator","spamToggle",S),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.filter.enabled"));if(u.equalsIgnoreCase("off"))return S=!1,$.inidb.set("chatModerator","spamToggle",S),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.filter.disabled"))}if(m.equalsIgnoreCase("symbols")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.usage",n(q)));if(u.equalsIgnoreCase("on"))return q=!0,$.inidb.set("chatModerator","symbolsToggle",q),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.filter.enabled"));if(u.equalsIgnoreCase("off"))return q=!1,$.inidb.set("chatModerator","symbolsToggle",q),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.filter.disabled"))}if(m.equalsIgnoreCase("emotes")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.usage",n(E)));if(u.equalsIgnoreCase("on"))return E=!0,$.inidb.set("chatModerator","emotesToggle",E),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.filter.enabled"));if(u.equalsIgnoreCase("off"))return E=!1,$.inidb.set("chatModerator","emotesToggle",E),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.filter.disabled"))}if(m.equalsIgnoreCase("colors")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.colors.usage",n(A)));if(u.equalsIgnoreCase("on"))return A=!0,$.inidb.set("chatModerator","colorsToggle",A),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.colors.filter.enabled"));if(u.equalsIgnoreCase("off"))return A=!1,$.inidb.set("chatModerator","colorsToggle",A),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.colors.filter.disabled"))}if(m.equalsIgnoreCase("longmessages")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.usage",n(_)));if(u.equalsIgnoreCase("on"))return _=!0,$.inidb.set("chatModerator","longMessageToggle",_),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.filter.enabled"));if(u.equalsIgnoreCase("off"))return _=!1,$.inidb.set("chatModerator","longMessageToggle",_),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.filter.disabled"))}if(m.equalsIgnoreCase("regulars")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.usage"));if(u.equalsIgnoreCase("links")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.link",l(U.Links)));d[2].equalsIgnoreCase("true")?(U.Links=!0,$.inidb.set("chatModerator","regularsModerateLinks",U.Links),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.links.allowed"))):d[2].equalsIgnoreCase("false")&&(U.Links=!1,$.inidb.set("chatModerator","regularsModerateLinks",U.Links),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.links.not.allowed")))}else if(u.equalsIgnoreCase("caps")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.caps",l(U.Caps)));d[2].equalsIgnoreCase("true")?(U.Caps=!0,$.inidb.set("chatModerator","regularsModerateCaps",U.Caps),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.caps.allowed"))):d[2].equalsIgnoreCase("false")&&(U.Caps=!1,$.inidb.set("chatModerator","regularsModerateCaps",U.Caps),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.caps.not.allowed")))}else if(u.equalsIgnoreCase("symbols")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.symbols",l(U.Symbols)));d[2].equalsIgnoreCase("true")?(U.Symbols=!0,$.inidb.set("chatModerator","regularsModerateSymbols",U.Symbols),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.symbols.allowed"))):d[2].equalsIgnoreCase("false")&&(U.Symbols=!1,$.inidb.set("chatModerator","regularsModerateSymbols",U.Symbols),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.symbols.not.allowed")))}else if(u.equalsIgnoreCase("spam")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.spam",l(U.Spam)));d[2].equalsIgnoreCase("true")?(U.Spam=!0,$.inidb.set("chatModerator","regularsModerateSpam",U.Spam),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.spam.allowed"))):d[2].equalsIgnoreCase("false")&&(U.Spam=!1,$.inidb.set("chatModerator","regularsModerateSpam",U.Spam),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.spam.not.allowed")))}else if(u.equalsIgnoreCase("emotes")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.emotes",l(U.Emotes)));d[2].equalsIgnoreCase("true")?(U.Emotes=!0,$.inidb.set("chatModerator","regularsModerateEmotes",U.Emotes),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.emotes.allowed"))):d[2].equalsIgnoreCase("false")&&(U.Emotes=!1,$.inidb.set("chatModerator","regularsModerateEmotes",U.Emotes),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.emotes.not.allowed")))}else if(u.equalsIgnoreCase("colors")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.colors",l(U.Colors)));d[2].equalsIgnoreCase("true")?(U.Colors=!0,$.inidb.set("chatModerator","regularsModerateColors",U.Colors),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.colors.allowed"))):d[2].equalsIgnoreCase("false")&&(U.Colors=!1,$.inidb.set("chatModerator","regularsModerateColors",U.Colors),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.colors.not.allowed")))}else if(u.equalsIgnoreCase("longmessages")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.toggle.long.msg",l(U.LongMsg)));d[2].equalsIgnoreCase("true")?(U.LongMsg=!0,$.inidb.set("chatModerator","regularsModerateLongMsg",U.LongMsg),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.long.messages.allowed"))):d[2].equalsIgnoreCase("false")&&(U.LongMsg=!1,$.inidb.set("chatModerator","regularsModerateLongMsg",U.LongMsg),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.regulars.long.messages.not.allowed")))}}if(m.equalsIgnoreCase("subscribers")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.usage"));if(u.equalsIgnoreCase("links")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.link",l(O.Links)));d[2].equalsIgnoreCase("true")?(O.Links=!0,$.inidb.set("chatModerator","subscribersModerateLinks",O.Links),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.links.allowed"))):d[2].equalsIgnoreCase("false")&&(O.Links=!1,$.inidb.set("chatModerator","subscribersModerateLinks",O.Links),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.links.not.allowed")))}else if(u.equalsIgnoreCase("caps")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.caps",l(O.Caps)));d[2].equalsIgnoreCase("true")?(O.Caps=!0,$.inidb.set("chatModerator","subscribersModerateCaps",O.Caps),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.caps.allowed"))):d[2].equalsIgnoreCase("false")&&(O.Caps=!1,$.inidb.set("chatModerator","subscribersModerateCaps",O.Caps),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.caps.not.allowed")))}else if(u.equalsIgnoreCase("symbols")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.symbols",l(O.Symbols)));d[2].equalsIgnoreCase("true")?(O.Symbols=!0,$.inidb.set("chatModerator","subscribersModerateSymbols",O.Symbols),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.symbols.allowed"))):d[2].equalsIgnoreCase("false")&&(O.Symbols=!1,$.inidb.set("chatModerator","subscribersModerateSymbols",O.Symbols),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.symbols.not.allowed")))}else if(u.equalsIgnoreCase("spam")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.spam",l(O.Spam)));d[2].equalsIgnoreCase("true")?(O.Spam=!0,$.inidb.set("chatModerator","subscribersModerateSpam",O.Spam),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.spam.allowed"))):d[2].equalsIgnoreCase("false")&&(O.Spam=!1,$.inidb.set("chatModerator","subscribersModerateSpam",O.Spam),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.spam.not.allowed")))}else if(u.equalsIgnoreCase("emotes")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.emotes",l(O.Emotes)));d[2].equalsIgnoreCase("true")?(O.Emotes=!0,$.inidb.set("chatModerator","subscribersModerateEmotes",O.Emotes),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.emotes.allowed"))):d[2].equalsIgnoreCase("false")&&(O.Emotes=!1,$.inidb.set("chatModerator","subscribersModerateEmotes",O.Emotes),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.emotes.not.allowed")))}else if(u.equalsIgnoreCase("colors")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.colors",l(O.Colors)));d[2].equalsIgnoreCase("true")?(O.Colors=!0,$.inidb.set("chatModerator","subscribersModerateColors",O.Colors),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.colors.allowed"))):d[2].equalsIgnoreCase("false")&&(O.Colors=!1,$.inidb.set("chatModerator","subscribersModerateColors",O.Colors),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.colors.not.allowed")))}else if(u.equalsIgnoreCase("longmessages")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.toggle.long.msg",l(O.LongMsg)));d[2].equalsIgnoreCase("true")?(O.LongMsg=!0,$.inidb.set("chatModerator","subscribersModerateLongMsg",O.LongMsg),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.long.messages.allowed"))):d[2].equalsIgnoreCase("false")&&(O.LongMsg=!1,$.inidb.set("chatModerator","subscribersModerateLongMsg",O.LongMsg),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.subscribers.long.messages.not.allowed")))}}if(m.equalsIgnoreCase("silenttimeout")){if(!u)return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.usage"));if(u.equalsIgnoreCase("links")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.links",n(K.Links)));d[2].equalsIgnoreCase("true")?(K.Links=!0,$.inidb.set("chatModerator","silentTimeoutLinks",K.Links),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.links.true"))):d[2].equalsIgnoreCase("false")&&(K.Links=!1,$.inidb.set("chatModerator","silentTimeoutLinks",K.Links),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.links.false")))}else if(u.equalsIgnoreCase("caps")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.caps",l(K.Caps)));d[2].equalsIgnoreCase("true")?(K.Caps=!0,$.inidb.set("chatModerator","silentTimeoutCaps",K.Caps),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.caps.true"))):d[2].equalsIgnoreCase("false")&&(K.Caps=!1,$.inidb.set("chatModerator","silentTimeoutCaps",K.Caps),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.caps.false")))}else if(u.equalsIgnoreCase("symbols")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.symbols",l(K.Symbols)));d[2].equalsIgnoreCase("true")?(K.Symbols=!0,$.inidb.set("chatModerator","silentTimeoutSymbols",K.Symbols),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.symbols.true"))):d[2].equalsIgnoreCase("false")&&(K.Symbols=!1,$.inidb.set("chatModerator","silentTimeoutSymbols",K.Symbols),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.symbols.false")))}else if(u.equalsIgnoreCase("spam")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.spam",l(K.Spam)));d[2].equalsIgnoreCase("true")?(K.Spam=!0,$.inidb.set("chatModerator","silentTimeoutSpam",K.Spam),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.spam.true"))):d[2].equalsIgnoreCase("false")&&(K.Spam=!1,$.inidb.set("chatModerator","silentTimeoutSpam",K.Spam),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.spam.false")))}else if(u.equalsIgnoreCase("emotes")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.emotes",l(K.Emotes)));d[2].equalsIgnoreCase("true")?(K.Emotes=!0,$.inidb.set("chatModerator","silentTimeoutEmotes",K.Emotes),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.emotes.true"))):d[2].equalsIgnoreCase("false")&&(K.Emotes=!1,$.inidb.set("chatModerator","silentTimeoutEmotes",K.Emotes),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.emotes.false")))}else if(u.equalsIgnoreCase("colors")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.colors",l(K.Colors)));d[2].equalsIgnoreCase("true")?(K.Colors=!0,$.inidb.set("chatModerator","silentTimeoutColors",K.Colors),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.colors.true"))):d[2].equalsIgnoreCase("false")&&(K.Colors=!1,$.inidb.set("chatModerator","silentTimeoutColors",K.Colors),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.colors.false")))}else if(u.equalsIgnoreCase("longmessages")){if(!d[2])return void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.toggle.long.msg",l(K.LongMsg)));d[2].equalsIgnoreCase("true")?(K.LongMsg=!0,$.inidb.set("chatModerator","silentTimeoutLongMsg",K.LongMsg),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.long.messages.true"))):d[2].equalsIgnoreCase("false")&&(K.LongMsg=!1,$.inidb.set("chatModerator","silentTimeoutLongMsg",K.LongMsg),$.say($.whisperPrefix(s)+$.lang.get("chatmoderator.silenttimeout.long.messages.false")))}}if(m.equalsIgnoreCase("linksmessage"))return u?(y=i.replace(m,"").trim(),$.inidb.set("chatModerator","linksMessage",y),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.link.message.set",y))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.link.message.usage"));if(m.equalsIgnoreCase("capsmessage"))return u?(C=i.replace(m,"").trim(),$.inidb.set("chatModerator","capsMessage",C),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.message.set",C))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.message.usage"));if(m.equalsIgnoreCase("symbolsmessage"))return u?(D=i.replace(m,"").trim(),$.inidb.set("chatModerator","symbolsMessage",D),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.message.set",D))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.message.usage"));if(m.equalsIgnoreCase("emotesmessage"))return u?(N=i.replace(m,"").trim(),$.inidb.set("chatModerator","emotesMessage",N),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.message.set",N))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.message.usage"));if(m.equalsIgnoreCase("colorsmessage"))return u?(G=i.replace(m,"").trim(),$.inidb.set("chatModerator","colorsMessage",G),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.colors.message.set",G))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.colors.message.usage"));if(m.equalsIgnoreCase("longmsgmessage"))return u?(j=i.replace(m,"").trim(),$.inidb.set("chatModerator","longMessageMessage",j),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.message.set",j))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.message.usage"));if(m.equalsIgnoreCase("spammessage"))return u?(v=i.replace(m,"").trim(),$.inidb.set("chatModerator","spamMessage",v),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.message.set",v))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.message.usage"));if(m.equalsIgnoreCase("blacklistmessage"))return u?(H=i.replace(m,"").trim(),$.inidb.set("chatModerator","blacklistMessage",H),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.message.set",H))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.blacklist.message.usage"));if(m.equalsIgnoreCase("permittime"))return u?(I=parseInt(u),$.inidb.set("chatModerator","linkPermitTime",I),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.permit.time.set",I))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.permit.time.usage"));if(m.equalsIgnoreCase("capslimit"))return u?(P=parseFloat(u),$.inidb.set("chatModerator","capsLimitPercent",P),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.limit.set",P))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.limit.usage"));if(m.equalsIgnoreCase("capstriggerlength"))return u?(x=parseInt(u),$.inidb.set("chatModerator","capsTriggerLength",x),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.trigger.length.set",capsLimit))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.caps.trigger.length.usage"));if(m.equalsIgnoreCase("spamlimit"))return u?(L=parseInt(u),$.inidb.set("chatModerator","spamLimit",L),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.limit.set",L))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.spam.limit.usage"));if(m.equalsIgnoreCase("symbolslimit"))return u?(k=parseFloat(u),$.inidb.set("chatModerator","symbolsLimitPercent",k),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.limit.set",k))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.limit.usage"));if(m.equalsIgnoreCase("symbolsgrouplimit"))return u?(T=parseInt(u),$.inidb.set("chatModerator","symbolsLimitPercent",T),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.group.limit.set",T))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.group.limit.usage"));if(m.equalsIgnoreCase("symbolsTriggerLength"))return u?(B=parseInt(u),$.inidb.set("chatModerator","symbolsTriggerLength",B),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.trigger.length.set",B))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.symbols.trigger.length.usage"));if(m.equalsIgnoreCase("emoteslimit"))return u?(F=parseInt(u),$.inidb.set("chatModerator","emotesLimit",F),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.limit.set",F))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.emotes.limit.usage"));if(m.equalsIgnoreCase("messagecharacterlimit"))return u?(R=parseInt(u),$.inidb.set("chatModerator","longMessageLimit",R),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.limit.set",R))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.message.limit.usage"));if(m.equalsIgnoreCase("timeouttime"))return u?(z=parseInt(u),$.inidb.set("chatModerator","timeoutTime",z),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.timeout.time.set",z))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.timeout.time.usage"));
if(m.equalsIgnoreCase("warningtime"))return u?(W=parseInt(u),$.inidb.set("chatModerator","warningTime",W),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.warning.time.set",W))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.warning.time.usage"));if(m.equalsIgnoreCase("messagecooldown"))return u?(J=parseInt(u),$.inidb.set("chatModerator","msgCooldownSec",J),void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.msgcooldown.set",J))):void $.say($.whisperPrefix(s)+$.lang.get("chatmoderator.msgcooldown.usage"))}o.equalsIgnoreCase("reloadmod")&&e()}),$.bind("initReady",function(){$.bot.isModuleEnabled("./core/chatmoderator.js")&&(a(),r(),$.registerChatCommand("./core/chatmoderator.js","permit",2),$.registerChatCommand("./core/chatmoderator.js","moderation",1),$.registerChatCommand("./core/chatmoderator.js","mod",1),$.registerChatCommand("./core/chatmoderator.js","blacklist",1),$.registerChatCommand("./core/chatmoderator.js","whitelist",1),$.registerChatCommand("./core/chatmoderator.js","reloadmod",1))}),$.timeoutUser=t,$.permitUserLink=g}();
