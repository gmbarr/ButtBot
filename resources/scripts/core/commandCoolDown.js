!function(){function o(o,e,n){return e=1e3*e+$.systemTime(),i?(s.push({command:o,time:e}),void $.consoleDebug("pushed "+o+" to global cooldown.")):void($.inidb.exists("cooldown",o)&&(s.push({command:o,time:e,user:n}),$.consoleDebug("pushed "+o+" to user cooldown.")))}function e(e,n){var d,r;if(i){for(r in s)if(s[r].command.equalsIgnoreCase(e)){if(d=s[r].time-$.systemTime(),d>0)return!a&&$.isMod(n)?0:parseInt(d);s.splice(r,1)}return void o(e,l)}for(r in s)if(s[r].command.equalsIgnoreCase(e)&&s[r].user.equalsIgnoreCase(n)){if(d=s[r].time-$.systemTime(),d>0)return!a&&$.isMod(n)?0:parseInt(d);s.splice(r,1)}o(e,parseInt($.inidb.get("cooldown",e)),n)}function n(o){var e;for(e in s)if(s[e].command.equalsIgnoreCase(o))return void s.splice(e,1)}var i=$.getSetIniDbBoolean("cooldown","globalCooldown",!1),l=$.getSetIniDbNumber("cooldown","globalCooldownTime",90),a=$.getSetIniDbBoolean("cooldown","modCooldown",!1),s=[];$.bind("command",function(o){var e=o.getSender().toLowerCase(),s=o.getCommand(),d=o.getArgs(),r=d[0],t=parseInt(d[1]);if(s.equalsIgnoreCase("coolcom")||s.equalsIgnoreCase("cooldown"))return $.isAdmin(e)?r&&t?-1==t?($.inidb.del("cooldown",r),n(r),void $.say($.whisperPrefix(e)+$.lang.get("cooldown.removed",r))):($.inidb.set("cooldown",r,t),void $.say($.whisperPrefix(e)+$.lang.get("cooldown.set",r,t))):void $.say($.whisperPrefix(e)+$.lang.get("cooldown.set.usage")):void $.say($.whisperPrefix(e)+$.adminMsg);if(s.equalsIgnoreCase("toggleglobalcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);i=!i,$.setIniDbBoolean("cooldown","globalCooldown",i),$.say($.whisperPrefix(e)+$.lang.get("cooldown.global.toggle",i?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}if(s.equalsIgnoreCase("globalcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);if(!r)return void $.say($.whisperPrefix(e)+$.lang.get("cooldown.global.usage"));if(isNaN(r))return void $.say($.whisperPrefix(e)+$.lang.get("cooldown.global.usage"));$.inidb.set("cooldown","globalCooldownTime",parseInt(r)),$.say($.whisperPrefix(e)+$.lang.get("cooldown.global.set",r)),l=parseInt(r)}if(s.equalsIgnoreCase("togglemodcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);a=!a,$.setIniDbBoolean("cooldown","modCooldown",a),$.say($.whisperPrefix(e)+$.lang.get("cooldown.set.togglemodcooldown",a?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./core/commandCoolDown.js")&&($.registerChatCommand("./core/commandCoolDown.js","coolcom",1),$.registerChatCommand("./core/commandCoolDown.js","cooldown",1),$.registerChatCommand("./core/commandCoolDown.js","globalcooldown",1),$.registerChatCommand("./core/commandCoolDown.js","toggleglobalcooldown",1),$.registerChatCommand("./core/commandCoolDown.js","togglemodcooldown",1))}),$.coolDown={set:o,get:e}}();
