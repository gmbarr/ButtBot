!function(){function o(o,e,n){if(null!=e&&0!=e&&!isNaN(e)){if(e=1e3*e+$.systemTime(),!o.equalsIgnoreCase("adventure")){if(i)return a.push({command:o,time:e}),void $.consoleDebug("pushed command !"+o+" to global cooldown.");if(l&&$.inidb.exists("cooldown",o))return a.push({command:o,time:e,user:n}),void $.consoleDebug("pushed command !"+o+" to user cooldown.")}($.inidb.exists("cooldown",o)||o.equalsIgnoreCase("adventure"))&&(a.push({command:o,time:e}),$.consoleDebug("pushed command !"+o+" to cooldown."))}}function e(e,n){var r,t;if(i){for(t in a)if(a[t].command.equalsIgnoreCase(e)){if(r=a[t].time-$.systemTime(),r>0)return!d&&$.isMod(n)?0:parseInt(r);a.splice(t,1)}return void o(e,s)}if(l){for(t in a)if(a[t].command.equalsIgnoreCase(e)&&a[t].user.equalsIgnoreCase(n)){if(r=a[t].time-$.systemTime(),r>0)return!d&&$.isMod(n)?0:parseInt(r);a.splice(t,1)}return void o(e,parseInt($.inidb.get("cooldown",e)),n)}for(t in a)if(a[t].command.equalsIgnoreCase(e)){if(r=a[t].time-$.systemTime(),r>0)return!d&&$.isMod(n)?0:parseInt(r);a.splice(t,1)}o(e,parseInt($.inidb.get("cooldown",e)))}function n(o){var e;for(e in a)if(a[e].command.equalsIgnoreCase(o))return void a.splice(e,1)}var i=$.inidb.exists("cooldown","globalCooldown")?$.getIniDbBoolean("cooldown","globalCooldown"):!1,l=$.inidb.exists("cooldown","perUserCooldown")?$.getIniDbBoolean("cooldown","perUserCooldown"):!1,s=$.inidb.exists("cooldown","globalCooldownTime")?parseInt($.inidb.get("cooldown","globalCooldownTime")):90,d=$.inidb.exists("cooldown","modCooldown")?$.getIniDbBoolean("cooldown","modCooldown"):!1,a=[];$.bind("command",function(o){var e=o.getSender().toLowerCase(),s=o.getCommand(),a=o.getArgs(),r=a[0],t=parseInt(a[1]);if(s.equalsIgnoreCase("coolcom")||s.equalsIgnoreCase("cooldown"))return $.isAdmin(e)?r&&t?-1==t?($.inidb.del("cooldown",r),n(r),void $.say($.whisperPrefix(e)+$.lang.get("cooldown.removed",r))):($.inidb.set("cooldown",r,t),void $.say($.whisperPrefix(e)+$.lang.get("cooldown.set",r,t))):void $.say($.whisperPrefix(e)+$.lang.get("cooldown.set.usage")):void $.say($.whisperPrefix(e)+$.adminMsg);if(s.equalsIgnoreCase("toggleglobalcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);i=!i,$.setIniDbBoolean("cooldown","globalCooldown",i),$.say($.whisperPrefix(e)+$.lang.get("cooldown.global.toggle",i?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}if(s.equalsIgnoreCase("toggleperusercooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);l=!l,$.setIniDbBoolean("cooldown","perUserCooldown",l),$.say($.whisperPrefix(e)+$.lang.get("cooldown.per.user.toggle",l?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}if(s.equalsIgnoreCase("globalcooldowntime")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);if(!r)return void $.say($.whisperPrefix(e)+$.lang.get("cooldown.global.usage"));$.inidb.set("cooldown","globalCooldownTime",parseInt(r)),$.say($.whisperPrefix(e)+$.lang.get("cooldown.global.set",r))}if(s.equalsIgnoreCase("togglemodcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);d=!d,$.setIniDbBoolean("cooldown","modCooldown",d),$.say($.whisperPrefix(e)+$.lang.get("cooldown.set.togglemodcooldown",d?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./core/commandCoolDown.js")&&($.registerChatCommand("./core/commandCoolDown.js","coolcom",1),$.registerChatCommand("./core/commandCoolDown.js","cooldown",1),$.registerChatCommand("./core/commandCoolDown.js","globalcooldowntime",1),$.registerChatCommand("./core/commandCoolDown.js","toggleglobalcooldown",1),$.registerChatCommand("./core/commandCoolDown.js","toggleperusercooldown",1),$.registerChatCommand("./core/commandCoolDown.js","togglemodcooldown",1))}),$.coolDown={set:o,get:e}}();
