!function(){function o(o,e,n){if(null!=e&&0!=e&&!isNaN(e)){if(e=1e3*e+$.systemTime(),!o.equalsIgnoreCase("adventure")){if(!$.inidb.exists("cooldown",o)&&i)return d.push({command:o,time:e}),void $.consoleDebug("Pushed command !"+o+" to global cooldown.");if(l&&$.inidb.exists("cooldown",o))return d.push({command:o,time:e,user:n}),void $.consoleDebug("Pushed command !"+o+" to user cooldown.")}($.inidb.exists("cooldown",o)||o.equalsIgnoreCase("adventure"))&&(d.push({command:o,time:e}),$.consoleDebug("Pushed command !"+o+" to cooldown."))}}function e(e,n){var r,t;if(i){for(t in d)if(d[t].command.equalsIgnoreCase(e)){if(r=d[t].time-$.systemTime(),r>0)return!a&&$.isMod(n)?0:parseInt(r);d.splice(t,1)}return void o(e,s)}if(l){for(t in d)if(d[t].command.equalsIgnoreCase(e)&&d[t].user.equalsIgnoreCase(n)){if(r=d[t].time-$.systemTime(),r>0)return!a&&$.isMod(n)?0:parseInt(r);d.splice(t,1)}return void o(e,parseInt($.inidb.get("cooldown",e)),n)}for(t in d)if(d[t].command.equalsIgnoreCase(e)){if(r=d[t].time-$.systemTime(),r>0)return!a&&$.isMod(n)?0:parseInt(r);d.splice(t,1)}o(e,parseInt($.inidb.get("cooldown",e)))}function n(o){var e;for(e in d)if(d[e].command.equalsIgnoreCase(o))return void d.splice(e,1)}var i=$.getSetIniDbBoolean("cooldown","globalCooldown",!1),l=$.getSetIniDbBoolean("cooldown","perUserCooldown",!1),s=$.getSetIniDbNumber("cooldown","globalCooldownTime",90),a=$.getSetIniDbBoolean("cooldown","modCooldown",!1),d=[];$.bind("command",function(o){var e=o.getSender().toLowerCase(),s=o.getCommand(),d=o.getArgs(),r=d[0],t=parseInt(d[1]);if(s.equalsIgnoreCase("coolcom")||s.equalsIgnoreCase("cooldown"))return $.isAdmin(e)?r&&t?-1==t?($.inidb.del("cooldown",r),n(r),void $.say($.whisperPrefix(e)+$.lang.get("cooldown.removed",r))):($.inidb.set("cooldown",r,t),void $.say($.whisperPrefix(e)+$.lang.get("cooldown.set",r,t))):void $.say($.whisperPrefix(e)+$.lang.get("cooldown.set.usage")):void $.say($.whisperPrefix(e)+$.adminMsg);if(s.equalsIgnoreCase("toggleglobalcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);i=!i,$.setIniDbBoolean("cooldown","globalCooldown",i),$.say($.whisperPrefix(e)+$.lang.get("cooldown.global.toggle",i?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}if(s.equalsIgnoreCase("toggleperusercooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);l=!l,$.setIniDbBoolean("cooldown","perUserCooldown",l),$.say($.whisperPrefix(e)+$.lang.get("cooldown.per.user.toggle",l?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}if(s.equalsIgnoreCase("globalcooldowntime")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);if(!r)return void $.say($.whisperPrefix(e)+$.lang.get("cooldown.global.usage"));$.inidb.set("cooldown","globalCooldownTime",parseInt(r)),$.say($.whisperPrefix(e)+$.lang.get("cooldown.global.set",r))}if(s.equalsIgnoreCase("togglemodcooldown")){if(!$.isAdmin(e))return void $.say($.whisperPrefix(e)+$.adminMsg);a=!a,$.setIniDbBoolean("cooldown","modCooldown",a),$.say($.whisperPrefix(e)+$.lang.get("cooldown.set.togglemodcooldown",a?$.lang.get("common.enabled"):$.lang.get("common.disabled")))}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./core/commandCoolDown.js")&&($.registerChatCommand("./core/commandCoolDown.js","coolcom",1),$.registerChatCommand("./core/commandCoolDown.js","cooldown",1),$.registerChatCommand("./core/commandCoolDown.js","globalcooldowntime",1),$.registerChatCommand("./core/commandCoolDown.js","toggleglobalcooldown",1),$.registerChatCommand("./core/commandCoolDown.js","toggleperusercooldown",1),$.registerChatCommand("./core/commandCoolDown.js","togglemodcooldown",1))}),$.coolDown={set:o,get:e}}();
