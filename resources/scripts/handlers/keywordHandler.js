!function(){$.bind("ircChannelMessage",function(e){for(var r=e.getMessage().toLowerCase(),n=e.getSender(),d="",a="",o="",s=$.inidb.GetKeyList("keywords",""),i=0;i<s.length;i++)if(o=s[i].toLowerCase(),d=new RegExp("\\b"+o+"\\b","i"),d.exec(r))return a=$.inidb.get("keywords",o),a=a.replace("(sender)",$.username.resolve(e.getSender())),a=a.replace("(@sender)","@"+$.username.resolve(e.getSender())),a=a.replace("(baresender)",e.getSender()),a=a.replace("(pointsname)",$.pointNameMultiple),a=a.replace("(uptime)",$.getStreamUptime($.channelName)),a=a.replace("(game)",$.getGame($.channelName)),a=a.replace("(status)",$.getStatus($.channelName)),$.coolDown.get(o,n)>0?void $.consoleDebug("keyword "+o+" not sent because its on a cooldown."):void $.say(a)}),$.bind("command",function(e){var r=e.getSender(),n=e.getCommand(),d=(e.getArguments().trim(),e.getArgs()),a=d[0],o=d[1].toLowerCase();if(n.equalsIgnoreCase("keyword")){if(!$.isAdmin(r))return void $.say($.whisperPrefix(r)+$.adminMsg);if(!a)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.usage"));if(a.equalsIgnoreCase("add")){if(!o)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.add.usage"));var s=d.splice(2).join(" ");return $.inidb.set("keywords",o,s),$.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.added",o)),void $.logEvent("keywordHandler.js",100,r+' added keyword "'+o+'" with the message "'+s+'"')}if(a.equalsIgnoreCase("remove")){if(!o)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.remove.usage"));if(!$.inidb.exists("keywords",o))return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.404"));$.inidb.del("keywords",o),$.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.removed",o)),$.logEvent("keywordHandler.js",100,r+' removed the keyword "'+o+'"')}}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/keywordHandler.js")&&$.registerChatCommand("./handlers/keywordHandler.js","keyword",1)})}();
