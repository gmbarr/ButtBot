(function(){$.bind("ircChannelMessage",function(event){var message=event.getMessage().toLowerCase(),sender=event.getSender(),regex="",keyword="",key="",i,keys=$.inidb.GetKeyList("keywords","");for(i in keys){key=keys[i].toLowerCase();regex=new RegExp("\\b"+key+"\\b","i");if(regex.exec(message)){keyword=$.inidb.get("keywords",key);keyword=keyword.replace("(sender)",sender);$.say(keyword);return}}});$.bind("command",function(event){var sender=event.getSender(),command=event.getCommand(),argString=event.getArguments().trim(),args=event.getArgs(),action=args[0],subAction=args[1];if(command.equalsIgnoreCase("keyword")){if(!$.isAdmin(sender)){$.say($.whisperPrefix(sender)+$.adminMsg);return}if(!action){$.say($.whisperPrefix(sender)+$.lang.get("keywordhandler.keyword.usage"));return}if(action.equalsIgnoreCase("add")){if(!subAction){$.say($.whisperPrefix(sender)+$.lang.get("keywordhandler.add.usage"));return}var response=args.splice(2).join(" ");$.inidb.set("keywords",subAction,response);$.say($.whisperPrefix(sender)+$.lang.get("keywordhandler.keyword.added",subAction));return}if(action.equalsIgnoreCase("remove")){if(!subAction){$.say($.whisperPrefix(sender)+$.lang.get("keywordhandler.remove.usage"));return}else if(!$.inidb.exists("keywords",subAction)){$.say($.whisperPrefix(sender)+$.lang.get("keywordhandler.keyword.404"));return}$.inidb.del("keywords",subAction);$.say($.whisperPrefix(sender)+$.lang.get("keywordhandler.keyword.removed",subAction))}}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./handlers/keywordHandler.js")){$.registerChatCommand("./handlers/keywordHandler.js","keyword",1)}})})();
