!function(){var e=$.inidb.exists("settings","hostReward")?$.inidb.get("settings","hostReward"):200,s=$.inidb.exists("settings","hostMessage")?$.inidb.get("settings","hostMessage"):$.lang.get("hosthandler.host.message"),i=216e5,t=[],n=[],r=!1;$.bind("twitchHostsInitialized",function(){$.bot.isModuleEnabled("./handlers/hostHandler.js")&&($.consoleLn(">> Enabling hosts announcements"),r=!0)}),$.bind("twitchHosted",function(a){if($.bot.isModuleEnabled("./handlers/hostHandler.js")){var o=$.username.resolve(a.getHoster()),g=$.systemTime(),d=s;r&&($.writeToFile(o,"./addons/hostHandler/latestHost.txt",!1),t[o]>g||n[o]>g||(t[o]=g+i,d=d.replace("(name)",o),d=d.replace("(reward)",""+e),$.say(d)))}}),$.bind("twitchUnhosted",function(e){if($.bot.isModuleEnabled("./handlers/hostHandler.js")){var s,i=e.getHoster();for(s in t)if(i.equalsIgnoreCase(s))return n[s]=t[s],void t.splice(s,1)}}),$.bind("command",function(e){var i,n=e.getSender().toLowerCase(),r=e.getCommand(),a=e.getArgs(),o=parseInt(a[0]),g=[];if(r.equalsIgnoreCase("hostreward")){if(!$.isAdmin(n))return void $.say($.whisperPrefix(n)+$.adminMsg);if(isNaN(o))return void $.say($.whisperPrefix(n)+$.lang.get("hosthandler.set.hostreward.usage",$.pointNameMultiple));$.inidb.set("settings","hostReward",o),$.say($.whisperPrefix(n)+$.lang.get("hosthandler.set.hostreward.success",$.getPointsString(o)))}if(r.equalsIgnoreCase("hostmessage")){if(!a||0==a.length)return void $.say($.whisperPrefix(n)+$.lang.get("hosthandler.set.hostmessage.usage"));s=e.getArguments(),$.inidb.set("settings","hostMessage",s),$.say($.whisperPrefix(n)+$.lang.get("hosthandler.set.hostmessage.success"))}if(r.equalsIgnoreCase("unhost")){if(!$.isAdmin(n))return void $.say($.whisperPrefix(n)+$.adminMsg);$.say(".unhost")}if(r.equalsIgnoreCase("host")){if(!$.isAdmin(n))return void $.say($.whisperPrefix(n)+$.adminMsg);$.say(".host "+a[0])}if(r.equalsIgnoreCase("hostcount")&&$.say($.lang.get("hosthandler.newhost",t.length)),r.equalsIgnoreCase("hostlist")){for(i in t)g.push(i);$.say($.lang.get("hosthandler.hostlist",g.join(", ")))}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/hostHandler.js")&&($.registerChatCommand("./handlers/hostHandler.js","hostmessage",1),$.registerChatCommand("./handlers/hostHandler.js","hostreward",1),$.registerChatCommand("./handlers/hostHandler.js","unhost",1),$.registerChatCommand("./handlers/hostHandler.js","host",1),$.registerChatCommand("./handlers/hostHandler.js","hostcount"),$.registerChatCommand("./handlers/hostHandler.js","hostlist"))})}();
