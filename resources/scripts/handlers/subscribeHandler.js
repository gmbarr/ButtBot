!function(){var e=$.inidb.exists("subscribeHandler","subscribeMessage")?$.inidb.get("subscribeHandler","subscribeMessage"):"(name) just subscribed!",s=$.inidb.exists("subscribeHandler","reSubscribeMessage")?$.inidb.get("subscribeHandler","reSubscribeMessage"):"(name) just subscribed for (months) months in a row!",i=$.inidb.exists("subscribeHandler","subscriberWelcomeToggle")?$.getIniDbBoolean("subscribeHandler","subscriberWelcomeToggle"):!0,t=$.inidb.exists("subscribeHandler","reSubscriberWelcomeToggle")?$.getIniDbBoolean("subscribeHandler","reSubscriberWelcomeToggle"):!0,n=parseInt($.inidb.exists("subscribeHandler","subscribeReward"))?parseInt($.inidb.get("subscribeHandler","subscribeReward")):0;$.bind("twitchSubscribesInitialized",function(){$.bot.isModuleEnabled("./handlers/subsribeHandler.js")&&$.consoleLn(">> Enabling subscriber announcements")}),$.bind("twitchSubscribe",function(e){if($.bot.isModuleEnabled("./handlers/subsribeHandler.js")){var s=e.getSubscriber();$.inidb.exists("subscribed",s)?n>0&&$.bot.isModuleEnabled("./core/pointSystem.js")&&$.inidb.incr("points",s,n):$.inidb.set("subscribed",s,"true")}}),$.bind("twitchUnsubscribe",function(e){if($.bot.isModuleEnabled("./handlers/subsribeHandler.js")){var s=e.getSubscriber();$.inidb.exists("subscribed",s)&&$.inidb.del("subscribed",s)}}),$.bind("command",function(t){var r=t.getSender(),a=t.getCommand(),o=t.getArguments().trim(),g=t.getArgs();if(a.equalsIgnoreCase("subwelcometoggle"))return $.isAdmin(r)?i?($.inidb.set("subscribeHandler","subscriberWelcomeToggle",!1),i=!1,void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.new.sub.toggle.off"))):($.inidb.set("subscribeHandler","subscriberWelcomeToggle",!0),i=!0,void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.new.sub.toggle.on"))):void $.say($.whisperPrefix(r)+$.adminMsg);if(a.equalsIgnoreCase("resubwelcometoggle"))return $.isAdmin(r)?i?($.inidb.set("subscribeHandler","reSubscriberWelcomeToggle",!1),i=!1,void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.resub.toggle.off"))):($.inidb.set("subscribeHandler","reSubscriberWelcomeToggle",!0),i=!0,void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.resub.toggle.on"))):void $.say($.whisperPrefix(r)+$.adminMsg);if(a.equalsIgnoreCase("submessage"))return $.isAdmin(r)?0==g.length?void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.sub.msg.usage")):($.inidb.set("subscribeHandler","subscribeMessage",o),e=o,void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.sub.msg.set"))):void $.say($.whisperPrefix(r)+$.adminMsg);if(a.equalsIgnoreCase("resubmessage"))return $.isAdmin(r)?0==g.length?void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.resub.msg.usage")):($.inidb.set("subscribeHandler","reSubscribeMessage",o),s=o,void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.resub.msg.set"))):void $.say($.whisperPrefix(r)+$.adminMsg);if(a.equalsIgnoreCase("subscribereward"))return $.isAdmin(r)?0==g.length?void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.reward.usage")):($.inidb.set("subscribeHandler","subscribeReward",parseInt(g[0])),n=parseInt(g[0]),void $.say($.whisperPrefix(r)+$.lang.get("subscribehandler.reward.set"))):void $.say($.whisperPrefix(r)+$.adminMsg);if(a.equalsIgnoreCase("subscribercount")){if(!$.isAdmin(r))return void $.say($.whisperPrefix(r)+$.adminMsg);var u,m=$.inidb.GetKeyList("subscribed",""),d=0;for(u=0;u<m.length;u++)d++;$.say($.whisperPrefix(r)+$.lang.get("subscribehandler.sub.count",d))}if(a.equalsIgnoreCase("subscribers")){if(!$.isModv3(r,t.getTags()))return void $.say($.whisperPrefix(r)+$.modMsg);$.say(".subscribers")}if(a.equalsIgnoreCase("subscribersoff")){if(!$.isModv3(r,t.getTags()))return void $.say($.whisperPrefix(r)+$.modMsg);$.say(".subscribersoff")}}),$.bind("ircPrivateMessage",function(r){var a=r.getSender(),o=r.getMessage(),g=e,u=s,m=""+o.substring(0,o.indexOf(" ",1));if(a.equalsIgnoreCase("twitchnotify")){if(o.contains("just subscribed!")&&i)return g=g.replace(/\(name\)/gi,m),g=g.replace("/(reward)/ig",n),void $.say(g);if(o.contains("months in a row!")&&o.contains("subscribed for")&&t){var d=""+o.substring(o.indexOf("months")-3,o.indexOf("months")-1);u=u.replace("/(name)/ig",m),u=u.replace("/(months)/ig",d),u=u.replace("/(reward)/ig",n),$.say(u)}}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/subscribehandler.js")&&($.registerChatCommand("./handlers/subscribehandler.js","subwelcometoggle",2),$.registerChatCommand("./handlers/subscribehandler.js","resubwelcometoggle",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribereward",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribecount",2),$.registerChatCommand("./handlers/subscribehandler.js","submessage",2),$.registerChatCommand("./handlers/subscribehandler.js","resubmessage",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribers",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribersoff",2))})}();
