!function(){var e=$.inidb.exists("subscribeHandler","subscribeMessage")?$.inidb.get("subscribeHandler","subscribeMessage"):"(name) just subscribed!",s=$.inidb.exists("subscribeHandler","reSubscribeMessage")?$.inidb.get("subscribeHandler","reSubscribeMessage"):"(name) just subscribed for (months) months in a row!",r=$.inidb.exists("subscribeHandler","subscribeMessageNoReward")?$.inidb.get("subscribeHandler","subscribeMessageNoReward"):"(name) just subscribed!",i=$.inidb.exists("subscribeHandler","reSubscribeMessageNoReward")?$.inidb.get("subscribeHandler","reSubscribeMessageNoReward"):"(name) just subscribed for (months) months in a row!",b=$.inidb.exists("subscribeHandler","subscriberWelcomeToggle")?$.getIniDbBoolean("subscribeHandler","subscriberWelcomeToggle"):!0,n=$.inidb.exists("subscribeHandler","reSubscriberWelcomeToggle")?$.getIniDbBoolean("subscribeHandler","reSubscriberWelcomeToggle"):!0,a=parseInt($.inidb.exists("subscribeHandler","subscribeReward"))?parseInt($.inidb.get("subscribeHandler","subscribeReward")):0;$.bind("twitchSubscribesInitialized",function(){$.bot.isModuleEnabled("./handlers/subscribeHandler.js")&&($.consoleLn(">> Enabling subscriber announcements"),$.logEvent("subscribehandler.js",24,"Subscriber announcements enabled"))}),$.bind("twitchSubscribe",function(e){if($.bot.isModuleEnabled("./handlers/subscribeHandler.js")){var s=e.getSubscriber();$.inidb.exists("subscribed",s)?a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")&&$.inidb.incr("points",s,a):($.addSubUsersList(s),$.restoreSubscriberStatus(s,!0))}}),$.bind("twitchUnsubscribe",function(e){if($.bot.isModuleEnabled("./handlers/subscribeHandler.js")){var s=e.getSubscriber();$.inidb.exists("subscribed",s)&&($.delSubUsersList(s),$.restoreSubscriberStatus(s,!0))}}),$.bind("command",function(n){var d=n.getSender(),t=n.getCommand(),u=n.getArguments().trim(),o=n.getArgs();if(t.equalsIgnoreCase("subwelcometoggle"))return $.isAdmin(d)?b?($.inidb.set("subscribeHandler","subscriberWelcomeToggle",!1),b=!1,$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.new.sub.toggle.off")),void $.logEvent("subscribehandler.js",83,d+" disabled subscriber announcements")):($.inidb.set("subscribeHandler","subscriberWelcomeToggle",!0),b=!0,$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.new.sub.toggle.on")),void $.logEvent("subscribehandler.js",89,d+" enabled subscriber announcements")):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("resubwelcometoggle"))return $.isAdmin(d)?b?($.inidb.set("subscribeHandler","reSubscriberWelcomeToggle",!1),b=!1,$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.resub.toggle.off")),void $.logEvent("subscribehandler.js",106,d+" disabled re-subscriber announcements")):($.inidb.set("subscribeHandler","reSubscriberWelcomeToggle",!0),b=!0,$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.resub.toggle.on")),void $.logEvent("subscribehandler.js",112,d+" enabled re-subscriber announcements")):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("submessage"))return $.isAdmin(d)?0==o.length?void $.say($.whisperPrefix(d)+$.lang.get("subscribehandler.sub.msg.usage")):($.inidb.set("subscribeHandler","subscribeMessage",u),e=u+"",$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.sub.msg.set")),void $.logEvent("subscribehandler.js",131,d+' changed the subscriber message to "'+e+'"')):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("resubmessage"))return $.isAdmin(d)?0==o.length?void $.say($.whisperPrefix(d)+$.lang.get("subscribehandler.resub.msg.usage")):($.inidb.set("subscribeHandler","reSubscribeMessage",u),s=u+"",$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.resub.msg.set")),void $.logEvent("subscribehandler.js",149,d+' changed the re-subscriber message to "'+s+'"')):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("submessagenoreward"))return $.isAdmin(d)?0==o.length?void $.say($.whisperPrefix(d)+$.lang.get("subscribehandler.sub.msg.usage")):($.inidb.set("subscribeHandler","subscribeMessageNoReward",u),r=u+"",$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.sub.msg.set")),void $.logEvent("subscribehandler.js",167,d+' changed the subscriber (no reward) message to "'+r+'"')):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("resubmessagenoreward"))return $.isAdmin(d)?0==o.length?void $.say($.whisperPrefix(d)+$.lang.get("subscribehandler.resub.msg.noreward.usage")):($.inidb.set("subscribeHandler","reSubscribeMessageNoReward",u),i=u+"",$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.resub.msg.noreward.set")),void $.logEvent("subscribehandler.js",185,d+' changed the re-subscriber (no reward) message to "'+i+'"')):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("subscribereward"))return $.isAdmin(d)?0==o.length?void $.say($.whisperPrefix(d)+$.lang.get("subscribehandler.reward.usage")):($.inidb.set("subscribeHandler","subscribeReward",parseInt(o[0])),a=parseInt(o[0]),$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.reward.set")),void $.logEvent("subscribehandler.js",204,d+" changed the subscriber reward to "+a)):void $.say($.whisperPrefix(d)+$.adminMsg);if(t.equalsIgnoreCase("subscribercount")){if(!$.isAdmin(d))return void $.say($.whisperPrefix(d)+$.adminMsg);var g,l=$.inidb.GetKeyList("subscribed",""),c=0;for(g=0;g<l.length;g++)c++;$.say($.whisperPrefix(d)+$.lang.get("subscribehandler.sub.count",c))}if(t.equalsIgnoreCase("subscribers")){if(!$.isModv3(d,n.getTags()))return void $.say($.whisperPrefix(d)+$.modMsg);$.say(".subscribers"),$.logEvent("subscribehandler.js",236,d+" enabled subscriber only mode")}if(t.equalsIgnoreCase("subscribersoff")){if(!$.isModv3(d,n.getTags()))return void $.say($.whisperPrefix(d)+$.modMsg);$.say(".subscribersoff"),$.logEvent("subscribehandler.js",236,d+" disabled subscriber only mode")}}),$.bind("ircPrivateMessage",function(d){var t,u,o=d.getSender(),g=d.getMessage(),l=g.substring(0,g.indexOf(" ",1)).toString();if(t=(a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")?e:r)+"",u=(a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")?s:i)+"",o.equalsIgnoreCase("twitchnotify")){if(g.contains("just subscribed!")&&b)return t=t.replace(/\(name\)/gi,l),a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")&&(t=t.replace(/\(reward\)/gi,a.toString())),$.say(t),$.addSubUsersList(l),void $.restoreSubscriberStatus(l,!0);if(g.contains("months in a row!")&&g.contains("subscribed for")&&n){var c=g.substring(g.indexOf("months")-3,g.indexOf("months")-1).toString();u=u.replace(/\(name\)/gi,l),u=u.replace(/\(months\)/gi,c),a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")&&(u=u.replace(/\(reward\)/gi,a.toString())),$.say(u)}}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/subscribehandler.js")&&($.registerChatCommand("./handlers/subscribehandler.js","subwelcometoggle",2),$.registerChatCommand("./handlers/subscribehandler.js","resubwelcometoggle",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribereward",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribercount",2),$.registerChatCommand("./handlers/subscribehandler.js","submessage",2),$.registerChatCommand("./handlers/subscribehandler.js","submessagenoreward",2),$.registerChatCommand("./handlers/subscribehandler.js","resubmessage",2),$.registerChatCommand("./handlers/subscribehandler.js","resubmessagenoreward",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribers",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribersoff",2))})}();
