!function(){var e=$.inidb.exists("subscribeHandler","subscribeMessage")?$.inidb.get("subscribeHandler","subscribeMessage"):"(name) just subscribed!",s=$.inidb.exists("subscribeHandler","reSubscribeMessage")?$.inidb.get("subscribeHandler","reSubscribeMessage"):"(name) just subscribed for (months) months in a row!",r=$.inidb.exists("subscribeHandler","subscribeMessageNoReward")?$.inidb.get("subscribeHandler","subscribeMessageNoReward"):"(name) just subscribed!",i=$.inidb.exists("subscribeHandler","reSubscribeMessageNoReward")?$.inidb.get("subscribeHandler","reSubscribeMessageNoReward"):"(name) just subscribed for (months) months in a row!",b=$.inidb.exists("subscribeHandler","subscriberWelcomeToggle")?$.getIniDbBoolean("subscribeHandler","subscriberWelcomeToggle"):!0,n=$.inidb.exists("subscribeHandler","reSubscriberWelcomeToggle")?$.getIniDbBoolean("subscribeHandler","reSubscriberWelcomeToggle"):!0,a=parseInt($.inidb.exists("subscribeHandler","subscribeReward"))?parseInt($.inidb.get("subscribeHandler","subscribeReward")):0;$.bind("twitchSubscribesInitialized",function(){$.bot.isModuleEnabled("./handlers/subscribeHandler.js")&&$.consoleLn(">> Enabling subscriber announcements")}),$.bind("twitchSubscribe",function(e){if($.bot.isModuleEnabled("./handlers/subscribeHandler.js")){var s=e.getSubscriber();$.inidb.exists("subscribed",s)?a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")&&$.inidb.incr("points",s,a):($.addSubUsersList(s),$.restoreSubscriberStatus(s,!0))}}),$.bind("twitchUnsubscribe",function(e){if($.bot.isModuleEnabled("./handlers/subscribeHandler.js")){var s=e.getSubscriber();$.inidb.exists("subscribed",s)&&($.delSubUsersList(s),$.restoreSubscriberStatus(s,!0))}}),$.bind("command",function(i){var n=i.getSender(),d=i.getCommand(),t=i.getArguments().trim(),u=i.getArgs();if(d.equalsIgnoreCase("subwelcometoggle"))return $.isAdmin(n)?b?($.inidb.set("subscribeHandler","subscriberWelcomeToggle",!1),b=!1,void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.new.sub.toggle.off"))):($.inidb.set("subscribeHandler","subscriberWelcomeToggle",!0),b=!0,void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.new.sub.toggle.on"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("resubwelcometoggle"))return $.isAdmin(n)?b?($.inidb.set("subscribeHandler","reSubscriberWelcomeToggle",!1),b=!1,void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.resub.toggle.off"))):($.inidb.set("subscribeHandler","reSubscriberWelcomeToggle",!0),b=!0,void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.resub.toggle.on"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("submessage"))return $.isAdmin(n)?0==u.length?void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.sub.msg.usage")):($.inidb.set("subscribeHandler","subscribeMessage",t),e=t+"",void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.sub.msg.set"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("resubmessage"))return $.isAdmin(n)?0==u.length?void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.resub.msg.usage")):($.inidb.set("subscribeHandler","reSubscribeMessage",t),s=t+"",void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.resub.msg.set"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("submessagenoreward"))return $.isAdmin(n)?0==u.length?void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.sub.msg.usage")):($.inidb.set("subscribeHandler","subscribeMessageNoReward",t),r=t+"",void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.sub.msg.set"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("resubmessagenoreward"))return $.isAdmin(n)?0==u.length?void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.resub.msg.noreward.usage")):($.inidb.set("subscribeHandler","reSubscribeMessageNoReward",t),s=t+"",void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.resub.msg.noreward.set"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("subscribereward"))return $.isAdmin(n)?0==u.length?void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.reward.usage")):($.inidb.set("subscribeHandler","subscribeReward",parseInt(u[0])),a=parseInt(u[0]),void $.say($.whisperPrefix(n)+$.lang.get("subscribehandler.reward.set"))):void $.say($.whisperPrefix(n)+$.adminMsg);if(d.equalsIgnoreCase("subscribercount")){if(!$.isAdmin(n))return void $.say($.whisperPrefix(n)+$.adminMsg);var g,o=$.inidb.GetKeyList("subscribed",""),l=0;for(g=0;g<o.length;g++)l++;$.say($.whisperPrefix(n)+$.lang.get("subscribehandler.sub.count",l))}if(d.equalsIgnoreCase("subscribers")){if(!$.isModv3(n,i.getTags()))return void $.say($.whisperPrefix(n)+$.modMsg);$.say(".subscribers")}if(d.equalsIgnoreCase("subscribersoff")){if(!$.isModv3(n,i.getTags()))return void $.say($.whisperPrefix(n)+$.modMsg);$.say(".subscribersoff")}}),$.bind("ircPrivateMessage",function(d){var t,u,g=d.getSender(),o=d.getMessage(),l=o.substring(0,o.indexOf(" ",1)).toString();if(t=(a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")?e:r)+"",u=(a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")?s:i)+"",g.equalsIgnoreCase("twitchnotify")){if(o.contains("just subscribed!")&&b)return t=t.replace(/\(name\)/gi,l),a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")&&(t=t.replace(/\(reward\)/gi,a.toString())),$.say(t),$.addSubUsersList(l),void $.restoreSubscriberStatus(l,!0);if(o.contains("months in a row!")&&o.contains("subscribed for")&&n){var c=o.substring(o.indexOf("months")-3,o.indexOf("months")-1).toString();u=u.replace(/\(name\)/gi,l),u=u.replace(/\(months\)/gi,c),a>0&&$.bot.isModuleEnabled("./systems/pointSystem.js")&&(u=u.replace(/\(reward\)/gi,a.toString())),$.say(u)}}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/subscribehandler.js")&&($.registerChatCommand("./handlers/subscribehandler.js","subwelcometoggle",2),$.registerChatCommand("./handlers/subscribehandler.js","resubwelcometoggle",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribereward",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribercount",2),$.registerChatCommand("./handlers/subscribehandler.js","submessage",2),$.registerChatCommand("./handlers/subscribehandler.js","submessagenoreward",2),$.registerChatCommand("./handlers/subscribehandler.js","resubmessage",2),$.registerChatCommand("./handlers/subscribehandler.js","resubmessagenoreward",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribers",2),$.registerChatCommand("./handlers/subscribehandler.js","subscribersoff",2))})}();
