!function(){var n=!1;$.bind("twitchAlertsDonationInitialized",function(){$.bot.isModuleEnabled("./handlers/donationsHandler.js")&&($.consoleLn(">> Enabling Twitch Alerts donation announcements"),n=!0)}),$.bind("twitchAlertsDonation",function(a){if($.bot.isModuleEnabled("./handlers/donationHandler.js")){{var o=a.getJsonString(),t=JSON.parse(o),i=t[0],e=(t[1],t[2],t[3]),d=t[4];t[5]}if(n&&!$.inidb.exists("donations",i)&&($.inidb.set("donations",i,o),$.inidb.set("donations","last_donation",i),$.writeToFile(d+": "+e,"./addons/donationHandler/latestDonation.txt",!1),$.lang.exists("donationhandler.donation.new"))){var s=$.lang.get("donationhandler.donation.new");s=s.replace("(name)",d),s=s.replace("(amount)",e),$.say(s)}}}),$.bind("command",function(n){{var a=(n.getSender().toLowerCase(),n.getCommand()),o=n.getArgs();parseInt(o[0])}if(a.equalsIgnoreCase("lastdonation")){if(!$.inidb.exists("donations","last_donation"))return void $.say($.lang.get("donationhandler.lastdonation.no-donations"));var t=$.inidb.get("donations","last_donation");if(!$.inidb.exists("donations",t))return void $.say($.lang.get("donationhandler.lastdonation.404"));var i=JSON.parse($.inidb.get("donations",t)),t=i[0],e=(i[1],i[2],i[3]),d=i[4],s=(i[5],$.lang.get("donationhandler.lastdonation.success"));s=s.replace("(name)",d),s=s.replace("(amount)",e),$.say(s)}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/donationHandler.js")&&$.registerChatCommand("./handlers/donationHandler.js","lastdonation",7)})}();
