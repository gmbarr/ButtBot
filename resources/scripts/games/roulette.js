(function(){var e=$.inidb.exists("roulette","timeoutTime")?parseInt($.inidb.get("roulette","timeoutTime")):60,t={win:0,lost:0},i=0;function o(){var e;for(e=1;$.lang.exists("roulette.win."+e);e++){t.win++}for(e=1;$.lang.exists("roulette.lost."+e);e++){t.lost++}$.consoleLn($.lang.get("roulette.console.loaded",t.win,t.lost))}function n(t){setTimeout(function(){$.say(".timeout "+t+" "+e)},2500)}$.bind("command",function(o){var s=o.getSender().toLowerCase(),r=o.getCommand(),a=o.getArgs(),l,u,g;if(r.equalsIgnoreCase("roulette")){u=$.randRange(1,2);g=$.randRange(1,2);if(u==g){do{l=$.randRange(1,t.win)}while(l==i);$.say($.lang.get("roulette.win."+l,$.resolveRank(s)))}else{do{l=$.randRange(1,t.lost)}while(l==i);$.say($.lang.get("roulette.lost."+l,$.resolveRank(s)));if(!$.isModv3(s,o.getTags())){if($.getBotWhisperMode()){$.say($.whisperPrefix(s)+$.lang.get("roulette.timeout.notifyuser",e))}n(s)}}}if(r.equalsIgnoreCase("roulettetimeouttime")){if(!$.isAdmin(s)){$.say($.whisperPrefix(s)+$.adminMsg);return}if(isNaN(parseInt(a[0]))){$.say($.whisperPrefix(s)+$.lang.get("roulette.set.timeouttime.usage"));return}e=parseInt(a[0]);$.inidb.set("roulette","timeoutTime",e);$.say($.whisperPrefix(s)+$.lang.get("roulette.set.timeouttime.success",e))}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./games/roulette.js")){o();$.registerChatCommand("./games/roulette.js","roulette",7)}})})();
